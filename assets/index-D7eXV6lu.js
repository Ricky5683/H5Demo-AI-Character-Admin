import{r as x,c as nt,g as at,e as ot,u as H,f as it,R as Ce,h as Pe,i as lt,j as L,N as Q,H as ct}from"./vendor-BT3SA_Mp.js";import{r as dt,T as z,F as b,C as P,I as M,R as J,a as ut,B as _,s as I,L as he,M as pt,b as mt,c as ht,D as xt,A as Re,d as gt,e as ft,f as yt,g as ge,h as G,E as fe,i as ye,j as je,P as ee,k as te,l as Le,m as Z,n as D,S as Y,o as ke,p as Me,q as jt,t as vt,U as Ne,u as Oe,v as B,w as $,x as K,y as At,z as De,G as $e,H as ze,J as Tt}from"./antd-uuZQaa5X.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const c of i.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&n(c)}).observe(document,{childList:!0,subtree:!0});function o(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(a){if(a.ep)return;a.ep=!0;const i=o(a);fetch(a.href,i)}})();var Ge={exports:{}},re={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var It=x,bt=Symbol.for("react.element"),_t=Symbol.for("react.fragment"),Et=Object.prototype.hasOwnProperty,wt=It.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,St={key:!0,ref:!0,__self:!0,__source:!0};function Ye(r,s,o){var n,a={},i=null,c=null;o!==void 0&&(i=""+o),s.key!==void 0&&(i=""+s.key),s.ref!==void 0&&(c=s.ref);for(n in s)Et.call(s,n)&&!St.hasOwnProperty(n)&&(a[n]=s[n]);if(r&&r.defaultProps)for(n in s=r.defaultProps,s)a[n]===void 0&&(a[n]=s[n]);return{$$typeof:bt,type:r,key:i,ref:c,props:a,_owner:wt.current}}re.Fragment=_t;re.jsx=Ye;re.jsxs=Ye;Ge.exports=re;var e=Ge.exports,xe={},ve=nt;xe.createRoot=ve.createRoot,xe.hydrateRoot=ve.hydrateRoot;var se={},He={exports:{}};(function(r){function s(o){return o&&o.__esModule?o:{default:o}}r.exports=s,r.exports.__esModule=!0,r.exports.default=r.exports})(He);var ne=He.exports,ae={};Object.defineProperty(ae,"__esModule",{value:!0});ae.default=void 0;var Ct={items_per_page:"æ¡/é¡µ",jump_to:"è·³è‡³",jump_to_confirm:"ç¡®å®š",page:"é¡µ",prev_page:"ä¸Šä¸€é¡µ",next_page:"ä¸‹ä¸€é¡µ",prev_5:"å‘å‰ 5 é¡µ",next_5:"å‘å 5 é¡µ",prev_3:"å‘å‰ 3 é¡µ",next_3:"å‘å 3 é¡µ",page_size:"é¡µç "};ae.default=Ct;var oe={},V={},ie={},Ue={exports:{}},Fe={exports:{}},Be={exports:{}},Xe={exports:{}};(function(r){function s(o){"@babel/helpers - typeof";return r.exports=s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},r.exports.__esModule=!0,r.exports.default=r.exports,s(o)}r.exports=s,r.exports.__esModule=!0,r.exports.default=r.exports})(Xe);var Ve=Xe.exports,We={exports:{}};(function(r){var s=Ve.default;function o(n,a){if(s(n)!="object"||!n)return n;var i=n[Symbol.toPrimitive];if(i!==void 0){var c=i.call(n,a||"default");if(s(c)!="object")return c;throw new TypeError("@@toPrimitive must return a primitive value.")}return(a==="string"?String:Number)(n)}r.exports=o,r.exports.__esModule=!0,r.exports.default=r.exports})(We);var Pt=We.exports;(function(r){var s=Ve.default,o=Pt;function n(a){var i=o(a,"string");return s(i)=="symbol"?i:i+""}r.exports=n,r.exports.__esModule=!0,r.exports.default=r.exports})(Be);var Rt=Be.exports;(function(r){var s=Rt;function o(n,a,i){return(a=s(a))in n?Object.defineProperty(n,a,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[a]=i,n}r.exports=o,r.exports.__esModule=!0,r.exports.default=r.exports})(Fe);var Lt=Fe.exports;(function(r){var s=Lt;function o(a,i){var c=Object.keys(a);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(a);i&&(u=u.filter(function(T){return Object.getOwnPropertyDescriptor(a,T).enumerable})),c.push.apply(c,u)}return c}function n(a){for(var i=1;i<arguments.length;i++){var c=arguments[i]!=null?arguments[i]:{};i%2?o(Object(c),!0).forEach(function(u){s(a,u,c[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(c)):o(Object(c)).forEach(function(u){Object.defineProperty(a,u,Object.getOwnPropertyDescriptor(c,u))})}return a}r.exports=n,r.exports.__esModule=!0,r.exports.default=r.exports})(Ue);var kt=Ue.exports,le={};Object.defineProperty(le,"__esModule",{value:!0});le.commonLocale=void 0;le.commonLocale={yearFormat:"YYYY",dayFormat:"D",cellMeridiemFormat:"A",monthBeforeYear:!0};var Mt=ne.default;Object.defineProperty(ie,"__esModule",{value:!0});ie.default=void 0;var Ae=Mt(kt),Nt=le,Ot=(0,Ae.default)((0,Ae.default)({},Nt.commonLocale),{},{locale:"zh_CN",today:"ä»Šå¤©",now:"æ­¤åˆ»",backToToday:"è¿”å›ä»Šå¤©",ok:"ç¡®å®š",timeSelect:"é€‰æ‹©æ—¶é—´",dateSelect:"é€‰æ‹©æ—¥æœŸ",weekSelect:"é€‰æ‹©å‘¨",clear:"æ¸…é™¤",week:"å‘¨",month:"æœˆ",year:"å¹´",previousMonth:"ä¸Šä¸ªæœˆ (ç¿»é¡µä¸Šé”®)",nextMonth:"ä¸‹ä¸ªæœˆ (ç¿»é¡µä¸‹é”®)",monthSelect:"é€‰æ‹©æœˆä»½",yearSelect:"é€‰æ‹©å¹´ä»½",decadeSelect:"é€‰æ‹©å¹´ä»£",previousYear:"ä¸Šä¸€å¹´ (Controlé”®åŠ å·¦æ–¹å‘é”®)",nextYear:"ä¸‹ä¸€å¹´ (Controlé”®åŠ å³æ–¹å‘é”®)",previousDecade:"ä¸Šä¸€å¹´ä»£",nextDecade:"ä¸‹ä¸€å¹´ä»£",previousCentury:"ä¸Šä¸€ä¸–çºª",nextCentury:"ä¸‹ä¸€ä¸–çºª",yearFormat:"YYYYå¹´",cellDateFormat:"D",monthBeforeYear:!1});ie.default=Ot;var W={};Object.defineProperty(W,"__esModule",{value:!0});W.default=void 0;const Dt={placeholder:"è¯·é€‰æ‹©æ—¶é—´",rangePlaceholder:["å¼€å§‹æ—¶é—´","ç»“æŸæ—¶é—´"]};W.default=Dt;var qe=ne.default;Object.defineProperty(V,"__esModule",{value:!0});V.default=void 0;var $t=qe(ie),zt=qe(W);const Ke={lang:Object.assign({placeholder:"è¯·é€‰æ‹©æ—¥æœŸ",yearPlaceholder:"è¯·é€‰æ‹©å¹´ä»½",quarterPlaceholder:"è¯·é€‰æ‹©å­£åº¦",monthPlaceholder:"è¯·é€‰æ‹©æœˆä»½",weekPlaceholder:"è¯·é€‰æ‹©å‘¨",rangePlaceholder:["å¼€å§‹æ—¥æœŸ","ç»“æŸæ—¥æœŸ"],rangeYearPlaceholder:["å¼€å§‹å¹´ä»½","ç»“æŸå¹´ä»½"],rangeMonthPlaceholder:["å¼€å§‹æœˆä»½","ç»“æŸæœˆä»½"],rangeQuarterPlaceholder:["å¼€å§‹å­£åº¦","ç»“æŸå­£åº¦"],rangeWeekPlaceholder:["å¼€å§‹å‘¨","ç»“æŸå‘¨"]},$t.default),timePickerLocale:Object.assign({},zt.default)};Ke.lang.ok="ç¡®å®š";V.default=Ke;var Gt=ne.default;Object.defineProperty(oe,"__esModule",{value:!0});oe.default=void 0;var Yt=Gt(V);oe.default=Yt.default;var ce=ne.default;Object.defineProperty(se,"__esModule",{value:!0});se.default=void 0;var Ht=ce(ae),Ut=ce(oe),Ft=ce(V),Bt=ce(W);const R="${label}ä¸æ˜¯ä¸€ä¸ªæœ‰æ•ˆçš„${type}",Xt={locale:"zh-cn",Pagination:Ht.default,DatePicker:Ft.default,TimePicker:Bt.default,Calendar:Ut.default,global:{placeholder:"è¯·é€‰æ‹©",close:"å…³é—­"},Table:{filterTitle:"ç­›é€‰",filterConfirm:"ç¡®å®š",filterReset:"é‡ç½®",filterEmptyText:"æ— ç­›é€‰é¡¹",filterCheckAll:"å…¨é€‰",filterSearchPlaceholder:"åœ¨ç­›é€‰é¡¹ä¸­æœç´¢",emptyText:"æš‚æ— æ•°æ®",selectAll:"å…¨é€‰å½“é¡µ",selectInvert:"åé€‰å½“é¡µ",selectNone:"æ¸…ç©ºæ‰€æœ‰",selectionAll:"å…¨é€‰æ‰€æœ‰",sortTitle:"æ’åº",expand:"å±•å¼€è¡Œ",collapse:"å…³é—­è¡Œ",triggerDesc:"ç‚¹å‡»é™åº",triggerAsc:"ç‚¹å‡»å‡åº",cancelSort:"å–æ¶ˆæ’åº"},Modal:{okText:"ç¡®å®š",cancelText:"å–æ¶ˆ",justOkText:"çŸ¥é“äº†"},Tour:{Next:"ä¸‹ä¸€æ­¥",Previous:"ä¸Šä¸€æ­¥",Finish:"ç»“æŸå¯¼è§ˆ"},Popconfirm:{cancelText:"å–æ¶ˆ",okText:"ç¡®å®š"},Transfer:{titles:["",""],searchPlaceholder:"è¯·è¾“å…¥æœç´¢å†…å®¹",itemUnit:"é¡¹",itemsUnit:"é¡¹",remove:"åˆ é™¤",selectCurrent:"å…¨é€‰å½“é¡µ",removeCurrent:"åˆ é™¤å½“é¡µ",selectAll:"å…¨é€‰æ‰€æœ‰",deselectAll:"å–æ¶ˆå…¨é€‰",removeAll:"åˆ é™¤å…¨éƒ¨",selectInvert:"åé€‰å½“é¡µ"},Upload:{uploading:"æ–‡ä»¶ä¸Šä¼ ä¸­",removeFile:"åˆ é™¤æ–‡ä»¶",uploadError:"ä¸Šä¼ é”™è¯¯",previewFile:"é¢„è§ˆæ–‡ä»¶",downloadFile:"ä¸‹è½½æ–‡ä»¶"},Empty:{description:"æš‚æ— æ•°æ®"},Icon:{icon:"å›¾æ ‡"},Text:{edit:"ç¼–è¾‘",copy:"å¤åˆ¶",copied:"å¤åˆ¶æˆåŠŸ",expand:"å±•å¼€",collapse:"æ”¶èµ·"},Form:{optional:"ï¼ˆå¯é€‰ï¼‰",defaultValidateMessages:{default:"å­—æ®µéªŒè¯é”™è¯¯${label}",required:"è¯·è¾“å…¥${label}",enum:"${label}å¿…é¡»æ˜¯å…¶ä¸­ä¸€ä¸ª[${enum}]",whitespace:"${label}ä¸èƒ½ä¸ºç©ºå­—ç¬¦",date:{format:"${label}æ—¥æœŸæ ¼å¼æ— æ•ˆ",parse:"${label}ä¸èƒ½è½¬æ¢ä¸ºæ—¥æœŸ",invalid:"${label}æ˜¯ä¸€ä¸ªæ— æ•ˆæ—¥æœŸ"},types:{string:R,method:R,array:R,object:R,number:R,date:R,boolean:R,integer:R,float:R,regexp:R,email:R,url:R,hex:R},string:{len:"${label}é¡»ä¸º${len}ä¸ªå­—ç¬¦",min:"${label}æœ€å°‘${min}ä¸ªå­—ç¬¦",max:"${label}æœ€å¤š${max}ä¸ªå­—ç¬¦",range:"${label}é¡»åœ¨${min}-${max}å­—ç¬¦ä¹‹é—´"},number:{len:"${label}å¿…é¡»ç­‰äº${len}",min:"${label}æœ€å°å€¼ä¸º${min}",max:"${label}æœ€å¤§å€¼ä¸º${max}",range:"${label}é¡»åœ¨${min}-${max}ä¹‹é—´"},array:{len:"é¡»ä¸º${len}ä¸ª${label}",min:"æœ€å°‘${min}ä¸ª${label}",max:"æœ€å¤š${max}ä¸ª${label}",range:"${label}æ•°é‡é¡»åœ¨${min}-${max}ä¹‹é—´"},pattern:{mismatch:"${label}ä¸æ¨¡å¼ä¸åŒ¹é…${pattern}"}}},Image:{preview:"é¢„è§ˆ"},QRCode:{expired:"äºŒç»´ç è¿‡æœŸ",refresh:"ç‚¹å‡»åˆ·æ–°",scanned:"å·²æ‰«æ"},ColorPicker:{presetEmpty:"æš‚æ— ",transparent:"æ— è‰²",singleColor:"å•è‰²",gradientColor:"æ¸å˜è‰²"}};se.default=Xt;var Vt=se;const Wt=at(Vt);var qt={exports:{}};(function(r,s){(function(o,n){r.exports=n(dt())})(ot,function(o){function n(c){return c&&typeof c=="object"&&"default"in c?c:{default:c}}var a=n(o),i={name:"zh-cn",weekdays:"æ˜ŸæœŸæ—¥_æ˜ŸæœŸä¸€_æ˜ŸæœŸäºŒ_æ˜ŸæœŸä¸‰_æ˜ŸæœŸå››_æ˜ŸæœŸäº”_æ˜ŸæœŸå…­".split("_"),weekdaysShort:"å‘¨æ—¥_å‘¨ä¸€_å‘¨äºŒ_å‘¨ä¸‰_å‘¨å››_å‘¨äº”_å‘¨å…­".split("_"),weekdaysMin:"æ—¥_ä¸€_äºŒ_ä¸‰_å››_äº”_å…­".split("_"),months:"ä¸€æœˆ_äºŒæœˆ_ä¸‰æœˆ_å››æœˆ_äº”æœˆ_å…­æœˆ_ä¸ƒæœˆ_å…«æœˆ_ä¹æœˆ_åæœˆ_åä¸€æœˆ_åäºŒæœˆ".split("_"),monthsShort:"1æœˆ_2æœˆ_3æœˆ_4æœˆ_5æœˆ_6æœˆ_7æœˆ_8æœˆ_9æœˆ_10æœˆ_11æœˆ_12æœˆ".split("_"),ordinal:function(c,u){return u==="W"?c+"å‘¨":c+"æ—¥"},weekStart:1,yearStart:4,formats:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY/MM/DD",LL:"YYYYå¹´MæœˆDæ—¥",LLL:"YYYYå¹´MæœˆDæ—¥Ahç‚¹mmåˆ†",LLLL:"YYYYå¹´MæœˆDæ—¥ddddAhç‚¹mmåˆ†",l:"YYYY/M/D",ll:"YYYYå¹´MæœˆDæ—¥",lll:"YYYYå¹´MæœˆDæ—¥ HH:mm",llll:"YYYYå¹´MæœˆDæ—¥dddd HH:mm"},relativeTime:{future:"%så†…",past:"%så‰",s:"å‡ ç§’",m:"1 åˆ†é’Ÿ",mm:"%d åˆ†é’Ÿ",h:"1 å°æ—¶",hh:"%d å°æ—¶",d:"1 å¤©",dd:"%d å¤©",M:"1 ä¸ªæœˆ",MM:"%d ä¸ªæœˆ",y:"1 å¹´",yy:"%d å¹´"},meridiem:function(c,u){var T=100*c+u;return T<600?"å‡Œæ™¨":T<900?"æ—©ä¸Š":T<1100?"ä¸Šåˆ":T<1300?"ä¸­åˆ":T<1800?"ä¸‹åˆ":"æ™šä¸Š"}};return a.default.locale(i,null,!0),i})})(qt);const Qe=x.createContext(void 0),de=()=>{const r=x.useContext(Qe);if(r===void 0)throw new Error("useAuth must be used within an AuthProvider");return r},Kt=({children:r})=>{const[s,o]=x.useState(null),[n,a]=x.useState(!1);x.useEffect(()=>{const T=localStorage.getItem("auth_user"),h=localStorage.getItem("auth_token");if(T&&h)try{const l=JSON.parse(T);o(l),a(!0)}catch(l){console.error("Failed to parse saved user data:",l),localStorage.removeItem("auth_user"),localStorage.removeItem("auth_token")}},[]);const u={user:s,isAuthenticated:n,login:async(T,h)=>{if(await new Promise(l=>setTimeout(l,1e3)),T==="Admin"&&h==="5173rongcloud"){const l={id:"1",username:"Admin"},t="mock_jwt_token_"+Date.now();return localStorage.setItem("auth_user",JSON.stringify(l)),localStorage.setItem("auth_token",t),o(l),a(!0),!0}return!1},logout:()=>{localStorage.removeItem("auth_user"),localStorage.removeItem("auth_token"),o(null),a(!1)}};return e.jsx(Qe.Provider,{value:u,children:r})},{Title:Qt,Text:Jt}=z,Zt=()=>{const[r]=b.useForm(),[s,o]=x.useState(!1),n=H(),{login:a}=de(),i=async c=>{o(!0);try{await a(c.username,c.password)?(I.success("ç™»å½•æˆåŠŸï¼"),n("/simple")):I.error("ç”¨æˆ·åæˆ–å¯†ç é”™è¯¯")}catch(u){console.error("Login error:",u),I.error("ç™»å½•å¤±è´¥ï¼Œè¯·ç¨åé‡è¯•")}finally{o(!1)}};return e.jsx("div",{style:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",padding:"20px"},children:e.jsxs(P,{style:{width:"100%",maxWidth:400,boxShadow:"0 8px 32px rgba(0, 0, 0, 0.1)",borderRadius:"12px"},children:[e.jsxs("div",{style:{textAlign:"center",marginBottom:32},children:[e.jsx(Qt,{level:2,style:{color:"#1890ff",marginBottom:8},children:"AIè§’è‰²ç®¡ç†åå°"}),e.jsx(Jt,{type:"secondary",children:"H5 Demo ç®¡ç†ç³»ç»Ÿ"})]}),e.jsxs(b,{form:r,name:"login",layout:"vertical",onFinish:i,autoComplete:"off",size:"large",children:[e.jsx(b.Item,{name:"username",label:"ç”¨æˆ·å",rules:[{required:!0,message:"è¯·è¾“å…¥ç”¨æˆ·å"},{min:2,message:"ç”¨æˆ·åè‡³å°‘2ä¸ªå­—ç¬¦"}],children:e.jsx(M,{prefix:e.jsx(J,{}),placeholder:"è¯·è¾“å…¥ç”¨æˆ·å"})}),e.jsx(b.Item,{name:"password",label:"å¯†ç ",rules:[{required:!0,message:"è¯·è¾“å…¥å¯†ç "},{min:6,message:"å¯†ç è‡³å°‘6ä¸ªå­—ç¬¦"}],children:e.jsx(M.Password,{prefix:e.jsx(ut,{}),placeholder:"è¯·è¾“å…¥å¯†ç "})}),e.jsx(b.Item,{children:e.jsx(_,{type:"primary",htmlType:"submit",loading:s,block:!0,style:{height:48,fontSize:16,borderRadius:8},children:s?"ç™»å½•ä¸­...":"ç™»å½•"})})]}),e.jsxs("div",{style:{marginTop:24,padding:16,background:"#f8f9fa",borderRadius:8,fontSize:12,color:"#666"},children:[e.jsx("div",{style:{marginBottom:8,fontWeight:"bold"},children:"Demo æµ‹è¯•è´¦å·ï¼š"}),e.jsx("div",{children:"ç”¨æˆ·åï¼šAdmin"}),e.jsx("div",{children:"å¯†ç ï¼š5173rongcloud"})]})]})})},er=[{key:"zh",label:"ä¸­æ–‡",flag:"ğŸ‡¨ğŸ‡³"},{key:"en",label:"English",flag:"ğŸ‡ºğŸ‡¸"},{key:"ar",label:"Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©",flag:"ğŸ‡¸ğŸ‡¦"}],Je=[{value:"male",label:"ç”·æ€§"},{value:"female",label:"å¥³æ€§"},{value:"other",label:"å…¶ä»–"}],Ze=[{value:"public",label:"å…¬å¼€"},{value:"private",label:"ç§æœ‰"}],et=[{value:"welcome",label:"æ¬¢è¿æ¶ˆæ¯"},{value:"support",label:"æŠ€æœ¯æ”¯æŒ"},{value:"product",label:"äº§å“ä»‹ç»"},{value:"faq",label:"å¸¸è§é—®é¢˜"},{value:"other",label:"å…¶ä»–"}],tt={DEFAULT_PAGE_SIZE:10,PAGE_SIZE_OPTIONS:["10","20","50","100"],SHOW_SIZE_CHANGER:!0,SHOW_QUICK_JUMPER:!0},X={MAX_FILE_SIZE:5*1024*1024,ACCEPTED_IMAGE_TYPES:["image/jpeg","image/jpg","image/png","image/gif","image/webp"],MAX_DISPLAY_IMAGES:6},g={REQUIRED:{required:!0,message:"æ­¤é¡¹ä¸ºå¿…å¡«é¡¹"},PHONE:{pattern:/^1[3-9]\d{9}$/,message:"è¯·è¾“å…¥æ­£ç¡®çš„æ‰‹æœºå·ç æ ¼å¼"},AGE:{type:"number",min:1,max:150,message:"å¹´é¾„å¿…é¡»åœ¨1-150ä¹‹é—´"},MAX_LENGTH:{NICKNAME:50,REGION:50,PROFESSION:50,INTRODUCTION:500,TAG:20,GREETING:200,SYSTEM_PROMPT:2e3,TEMPLATE_NAME:100,TEMPLATE_DESCRIPTION:200,TEMPLATE_CONTENT:5e3}},U={CHARACTER:{AGE:25,GENDER:"female",PERMISSION:"public",AVATAR:"https://images.unsplash.com/photo-1494790108755-2616b612b742?w=150&h=150&fit=crop&crop=face"},TEMPLATE:{CATEGORY:"other",IS_ACTIVE:!0}},tr=[{key:"characters",label:"AIè§’è‰²ç®¡ç†",icon:"UserOutlined",path:"/characters"},{key:"templates",label:"æ¨¡æ¿ç®¡ç†",icon:"FileTextOutlined",path:"/templates"},{key:"config",label:"é€šç”¨é…ç½®",icon:"SettingOutlined",path:"/config"}],{Header:rr,Sider:sr,Content:nr}=he,ar=({children:r})=>{const[s,o]=x.useState(!1),n=H(),a=it(),{user:i,logout:c}=de(),u=()=>{const m=a.hash||window.location.hash,j=a.pathname,w=m?m.replace("#",""):j;return w.includes("/characters")?"characters":w.includes("/templates")?"templates":w.includes("/config")?"config":"characters"},T=({key:m})=>{const j=tr.find(w=>w.key===m);j&&n(j.path)},h=()=>{c(),n("/login")},l=[{key:"logout",icon:e.jsx(yt,{}),label:"é€€å‡ºç™»å½•",onClick:h}],t=[{key:"characters",icon:e.jsx(J,{}),label:"AIè§’è‰²ç®¡ç†"},{key:"templates",icon:e.jsx(gt,{}),label:"æ¨¡æ¿ç®¡ç†"},{key:"config",icon:e.jsx(ft,{}),label:"é€šç”¨é…ç½®"}];return e.jsxs(he,{style:{minHeight:"100vh"},children:[e.jsxs(sr,{trigger:null,collapsible:!0,collapsed:s,theme:"dark",children:[e.jsx("div",{style:{height:64,display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontSize:"18px",fontWeight:"bold",borderBottom:"1px solid #404040"},children:s?"AI":"AIè§’è‰²ç®¡ç†åå°"}),e.jsx(pt,{theme:"dark",mode:"inline",selectedKeys:[u()],items:t,onClick:T,style:{borderRight:0}})]}),e.jsxs(he,{children:[e.jsxs(rr,{style:{padding:"0 24px",background:"#fff",display:"flex",alignItems:"center",justifyContent:"space-between",borderBottom:"1px solid #f0f0f0"},children:[e.jsx("div",{style:{display:"flex",alignItems:"center"},children:e.jsx(_,{type:"text",icon:s?e.jsx(mt,{}):e.jsx(ht,{}),onClick:()=>o(!s),style:{fontSize:"16px",width:64,height:64}})}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[e.jsxs("span",{children:["æ¬¢è¿ï¼Œ",i==null?void 0:i.username]}),e.jsx(xt,{menu:{items:l},placement:"bottomRight",arrow:!0,children:e.jsx(Re,{style:{backgroundColor:"#1890ff",cursor:"pointer"},icon:e.jsx(J,{})})})]})]}),e.jsx(nr,{style:{margin:"24px",padding:"24px",background:"#fff",borderRadius:"8px",boxShadow:"0 1px 3px rgba(0, 0, 0, 0.1)"},children:r})]})]})},or="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict";let k=(r=21)=>{let s="",o=crypto.getRandomValues(new Uint8Array(r|=0));for(;r--;)s+=or[o[r]&63];return s};const E=(r,s,o)=>({zh:r,en:s,ar:o}),ir=()=>[{id:k(),botId:`bot_${k()}`,avatar:"https://images.unsplash.com/photo-1494790108755-2616b612b742?w=150&h=150&fit=crop&crop=face",gender:"female",age:25,permission:"public",nickname:E("å°é›…åŠ©æ‰‹","Xiaoya Assistant","Ù…Ø³Ø§Ø¹Ø¯ Ø´ÙŠØ§ÙˆÙŠØ§"),region:E("åŒ—äº¬","Beijing","Ø¨ÙƒÙŠÙ†"),profession:E("AIåŠ©æ‰‹","AI Assistant","Ù…Ø³Ø§Ø¹Ø¯ Ø°ÙƒÙŠ"),introduction:E("æˆ‘æ˜¯å°é›…ï¼Œä¸€ä¸ªå‹å–„çš„AIåŠ©æ‰‹ï¼Œå¯ä»¥å¸®åŠ©æ‚¨è§£ç­”é—®é¢˜å’Œæä¾›å»ºè®®ã€‚","I am Xiaoya, a friendly AI assistant who can help answer questions and provide advice.","Ø£Ù†Ø§ Ø´ÙŠØ§ÙˆÙŠØ§ØŒ Ù…Ø³Ø§Ø¹Ø¯ Ø°ÙƒÙŠ ÙˆØ¯ÙˆØ¯ ÙŠÙ…ÙƒÙ†Ù†ÙŠ Ù…Ø³Ø§Ø¹Ø¯ØªÙƒ ÙÙŠ Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© Ø¹Ù„Ù‰ Ø§Ù„Ø£Ø³Ø¦Ù„Ø© ÙˆØªÙ‚Ø¯ÙŠÙ… Ø§Ù„Ù†ØµØ§Ø¦Ø­."),tags:{zh:["å‹å–„","ä¸“ä¸š","é«˜æ•ˆ"],en:["Friendly","Professional","Efficient"],ar:["ÙˆØ¯ÙˆØ¯","Ù…Ø­ØªØ±Ù","ÙØ¹Ø§Ù„"]},greeting:E("ä½ å¥½ï¼æˆ‘æ˜¯å°é›…ï¼Œå¾ˆé«˜å…´ä¸ºæ‚¨æœåŠ¡ï¼æœ‰ä»€ä¹ˆå¯ä»¥å¸®åŠ©æ‚¨çš„å—ï¼Ÿ","Hello! I am Xiaoya, nice to serve you! How can I help you?","Ù…Ø±Ø­Ø¨Ø§! Ø£Ù†Ø§ Ø´ÙŠØ§ÙˆÙŠØ§ØŒ Ù…Ù† Ø¯ÙˆØ§Ø¹ÙŠ Ø³Ø±ÙˆØ±ÙŠ Ø®Ø¯Ù…ØªÙƒ! ÙƒÙŠÙ ÙŠÙ…ÙƒÙ†Ù†ÙŠ Ù…Ø³Ø§Ø¹Ø¯ØªÙƒØŸ"),displayImages:["https://images.unsplash.com/photo-1494790108755-2616b612b742?w=300&h=400&fit=crop","https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=300&h=400&fit=crop"],systemPrompt:"You are Xiaoya, a helpful and friendly AI assistant. Always be polite, professional, and try your best to help users with their questions.",whitelist:["13800138000","13900139000"],createdAt:new Date("2024-01-15").toISOString(),updatedAt:new Date("2024-01-20").toISOString()},{id:k(),botId:`bot_${k()}`,avatar:"https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=150&h=150&fit=crop&crop=face",gender:"male",age:30,permission:"private",nickname:E("æŠ€æœ¯ä¸“å®¶Tom","Tech Expert Tom","Ø®Ø¨ÙŠØ± Ø§Ù„ØªÙƒÙ†ÙˆÙ„ÙˆØ¬ÙŠØ§ ØªÙˆÙ…"),region:E("ä¸Šæµ·","Shanghai","Ø´Ù†ØºÙ‡Ø§ÙŠ"),profession:E("æŠ€æœ¯é¡¾é—®","Technical Consultant","Ù…Ø³ØªØ´Ø§Ø± ØªÙ‚Ù†ÙŠ"),introduction:E("æˆ‘æ˜¯Tomï¼Œä¸“æ³¨äºæŠ€æœ¯é¢†åŸŸçš„AIåŠ©æ‰‹ï¼Œæ“…é•¿ç¼–ç¨‹ã€æ¶æ„è®¾è®¡å’ŒæŠ€æœ¯å’¨è¯¢ã€‚","I am Tom, an AI assistant focused on technology, specializing in programming, architecture design, and technical consulting.","Ø£Ù†Ø§ ØªÙˆÙ…ØŒ Ù…Ø³Ø§Ø¹Ø¯ Ø°ÙƒÙŠ ÙŠØ±ÙƒØ² Ø¹Ù„Ù‰ Ø§Ù„ØªÙƒÙ†ÙˆÙ„ÙˆØ¬ÙŠØ§ØŒ Ù…ØªØ®ØµØµ ÙÙŠ Ø§Ù„Ø¨Ø±Ù…Ø¬Ø© ÙˆØªØµÙ…ÙŠÙ… Ø§Ù„Ø¨Ù†ÙŠØ© Ø§Ù„ØªØ­ØªÙŠØ© ÙˆØ§Ù„Ø§Ø³ØªØ´Ø§Ø±Ø§Øª Ø§Ù„ØªÙ‚Ù†ÙŠØ©."),tags:{zh:["æŠ€æœ¯","ç¼–ç¨‹","æ¶æ„","ä¸“ä¸š"],en:["Technology","Programming","Architecture","Professional"],ar:["ØªÙƒÙ†ÙˆÙ„ÙˆØ¬ÙŠØ§","Ø¨Ø±Ù…Ø¬Ø©","Ù‡Ù†Ø¯Ø³Ø© Ù…Ø¹Ù…Ø§Ø±ÙŠØ©","Ù…Ø­ØªØ±Ù"]},greeting:E("æ‚¨å¥½ï¼æˆ‘æ˜¯Tomï¼Œæ‚¨çš„æŠ€æœ¯é¡¾é—®ã€‚æœ‰ä»€ä¹ˆæŠ€æœ¯é—®é¢˜éœ€è¦æ¢è®¨å—ï¼Ÿ","Hello! I am Tom, your technical consultant. Any technical questions to discuss?","Ù…Ø±Ø­Ø¨Ø§! Ø£Ù†Ø§ ØªÙˆÙ…ØŒ Ù…Ø³ØªØ´Ø§Ø±Ùƒ Ø§Ù„ØªÙ‚Ù†ÙŠ. Ù‡Ù„ Ù„Ø¯ÙŠÙƒ Ø£ÙŠ Ø£Ø³Ø¦Ù„Ø© ØªÙ‚Ù†ÙŠØ© Ù„Ù„Ù…Ù†Ø§Ù‚Ø´Ø©ØŸ"),displayImages:["https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=300&h=400&fit=crop","https://images.unsplash.com/photo-1560250097-0b93528c311a?w=300&h=400&fit=crop"],systemPrompt:"You are Tom, a technical expert AI assistant. You specialize in programming, software architecture, and providing technical solutions. Be precise, helpful, and professional.",whitelist:["13700137000","13600136000","13500135000"],createdAt:new Date("2024-01-10").toISOString(),updatedAt:new Date("2024-01-18").toISOString()},{id:k(),botId:`bot_${k()}`,avatar:"https://images.unsplash.com/photo-1438761681033-6461ffad8d80?w=150&h=150&fit=crop&crop=face",gender:"female",age:28,permission:"public",nickname:E("åˆ›æ„è®¾è®¡å¸ˆLily","Creative Designer Lily","Ø§Ù„Ù…ØµÙ…Ù…Ø© Ø§Ù„Ø¥Ø¨Ø¯Ø§Ø¹ÙŠØ© Ù„ÙŠÙ„ÙŠ"),region:E("æ·±åœ³","Shenzhen","Ø´Ù†ØªØ´Ù†"),profession:E("UI/UXè®¾è®¡å¸ˆ","UI/UX Designer","Ù…ØµÙ…Ù… ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…"),introduction:E("æˆ‘æ˜¯Lilyï¼Œä¸“ä¸šçš„UI/UXè®¾è®¡å¸ˆï¼Œçƒ­çˆ±åˆ›æ„è®¾è®¡ï¼Œå¯ä»¥ä¸ºæ‚¨æä¾›è®¾è®¡å»ºè®®å’Œåˆ›æ„çµæ„Ÿã€‚","I am Lily, a professional UI/UX designer who loves creative design and can provide design advice and creative inspiration.","Ø£Ù†Ø§ Ù„ÙŠÙ„ÙŠØŒ Ù…ØµÙ…Ù…Ø© ÙˆØ§Ø¬Ù‡Ø© Ù…Ø³ØªØ®Ø¯Ù… Ù…Ø­ØªØ±ÙØ© Ø£Ø­Ø¨ Ø§Ù„ØªØµÙ…ÙŠÙ… Ø§Ù„Ø¥Ø¨Ø¯Ø§Ø¹ÙŠ ÙˆÙŠÙ…ÙƒÙ†Ù†ÙŠ ØªÙ‚Ø¯ÙŠÙ… Ù†ØµØ§Ø¦Ø­ Ø§Ù„ØªØµÙ…ÙŠÙ… ÙˆØ§Ù„Ø¥Ù„Ù‡Ø§Ù… Ø§Ù„Ø¥Ø¨Ø¯Ø§Ø¹ÙŠ."),tags:{zh:["åˆ›æ„","è®¾è®¡","ç¾å­¦","ç”¨æˆ·ä½“éªŒ"],en:["Creative","Design","Aesthetic","User Experience"],ar:["Ø¥Ø¨Ø¯Ø§Ø¹ÙŠ","ØªØµÙ…ÙŠÙ…","Ø¬Ù…Ø§Ù„ÙŠ","ØªØ¬Ø±Ø¨Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…"]},greeting:E("å—¨ï¼æˆ‘æ˜¯Lilyï¼Œè®©æˆ‘ä»¬ä¸€èµ·åˆ›é€ ç¾å¥½çš„è®¾è®¡å§ï¼æœ‰ä»€ä¹ˆè®¾è®¡éœ€æ±‚å—ï¼Ÿ","Hi! I am Lily, let's create beautiful designs together! Any design needs?","Ù…Ø±Ø­Ø¨Ø§! Ø£Ù†Ø§ Ù„ÙŠÙ„ÙŠØŒ Ø¯Ø¹ÙˆÙ†Ø§ Ù†Ù†Ø´Ø¦ ØªØµØ§Ù…ÙŠÙ… Ø¬Ù…ÙŠÙ„Ø© Ù…Ø¹Ø§! Ù‡Ù„ Ù„Ø¯ÙŠÙƒ Ø£ÙŠ Ø§Ø­ØªÙŠØ§Ø¬Ø§Øª ØªØµÙ…ÙŠÙ…ÙŠØ©ØŸ"),displayImages:["https://images.unsplash.com/photo-1438761681033-6461ffad8d80?w=300&h=400&fit=crop","https://images.unsplash.com/photo-1534528741775-53994a69daeb?w=300&h=400&fit=crop"],systemPrompt:"You are Lily, a creative UI/UX designer AI assistant. You are passionate about design, aesthetics, and user experience. Provide creative and practical design advice.",whitelist:[],createdAt:new Date("2024-01-12").toISOString(),updatedAt:new Date("2024-01-22").toISOString()}],lr=()=>[{id:k(),name:E("æ¬¢è¿æ¶ˆæ¯æ¨¡æ¿","Welcome Message Template","Ù‚Ø§Ù„Ø¨ Ø±Ø³Ø§Ù„Ø© Ø§Ù„ØªØ±Ø­ÙŠØ¨"),description:E("ç”¨äºæ–°ç”¨æˆ·çš„æ¬¢è¿æ¶ˆæ¯æ¨¡æ¿","Welcome message template for new users","Ù‚Ø§Ù„Ø¨ Ø±Ø³Ø§Ù„Ø© ØªØ±Ø­ÙŠØ¨ Ù„Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† Ø§Ù„Ø¬Ø¯Ø¯"),content:E("æ¬¢è¿æ¥åˆ°æˆ‘ä»¬çš„å¹³å°ï¼æˆ‘ä»¬å¾ˆé«˜å…´æ‚¨çš„åŠ å…¥ã€‚å¦‚æœæ‚¨æœ‰ä»»ä½•é—®é¢˜ï¼Œè¯·éšæ—¶è”ç³»æˆ‘ä»¬ã€‚","Welcome to our platform! We are glad to have you join us. If you have any questions, please feel free to contact us.","Ù…Ø±Ø­Ø¨Ø§ Ø¨Ùƒ ÙÙŠ Ù…Ù†ØµØªÙ†Ø§! Ù†Ø­Ù† Ø³Ø¹Ø¯Ø§Ø¡ Ù„Ø§Ù†Ø¶Ù…Ø§Ù…Ùƒ Ø¥Ù„ÙŠÙ†Ø§. Ø¥Ø°Ø§ ÙƒØ§Ù† Ù„Ø¯ÙŠÙƒ Ø£ÙŠ Ø£Ø³Ø¦Ù„Ø©ØŒ Ù„Ø§ ØªØªØ±Ø¯Ø¯ ÙÙŠ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ù†Ø§."),category:"welcome",isActive:!0,createdAt:new Date("2024-01-08").toISOString(),updatedAt:new Date("2024-01-15").toISOString()},{id:k(),name:E("æŠ€æœ¯æ”¯æŒæ¨¡æ¿","Technical Support Template","Ù‚Ø§Ù„Ø¨ Ø§Ù„Ø¯Ø¹Ù… Ø§Ù„ØªÙ‚Ù†ÙŠ"),description:E("æŠ€æœ¯æ”¯æŒç›¸å…³çš„å›å¤æ¨¡æ¿","Reply template for technical support","Ù‚Ø§Ù„Ø¨ Ø§Ù„Ø±Ø¯ Ù„Ù„Ø¯Ø¹Ù… Ø§Ù„ØªÙ‚Ù†ÙŠ"),content:E("æ„Ÿè°¢æ‚¨çš„åé¦ˆã€‚æˆ‘ä»¬çš„æŠ€æœ¯å›¢é˜Ÿæ­£åœ¨å¤„ç†æ‚¨çš„é—®é¢˜ï¼Œé¢„è®¡åœ¨24å°æ—¶å†…ç»™æ‚¨å›å¤ã€‚","Thank you for your feedback. Our technical team is working on your issue and we expect to reply within 24 hours.","Ø´ÙƒØ±Ø§ Ù„Ùƒ Ø¹Ù„Ù‰ Ù…Ù„Ø§Ø­Ø¸Ø§ØªÙƒ. ÙØ±ÙŠÙ‚Ù†Ø§ Ø§Ù„ØªÙ‚Ù†ÙŠ ÙŠØ¹Ù…Ù„ Ø¹Ù„Ù‰ Ù…Ø´ÙƒÙ„ØªÙƒ ÙˆÙ†ØªÙˆÙ‚Ø¹ Ø§Ù„Ø±Ø¯ Ø®Ù„Ø§Ù„ 24 Ø³Ø§Ø¹Ø©."),category:"support",isActive:!0,createdAt:new Date("2024-01-10").toISOString(),updatedAt:new Date("2024-01-12").toISOString()},{id:k(),name:E("äº§å“ä»‹ç»æ¨¡æ¿","Product Introduction Template","Ù‚Ø§Ù„Ø¨ ØªÙ‚Ø¯ÙŠÙ… Ø§Ù„Ù…Ù†ØªØ¬"),description:E("ç”¨äºä»‹ç»äº§å“åŠŸèƒ½çš„æ¨¡æ¿","Template for introducing product features","Ù‚Ø§Ù„Ø¨ Ù„ØªÙ‚Ø¯ÙŠÙ… Ù…ÙŠØ²Ø§Øª Ø§Ù„Ù…Ù†ØªØ¬"),content:E("æˆ‘ä»¬çš„äº§å“å…·æœ‰ä»¥ä¸‹ç‰¹ç‚¹ï¼š1. æ™ºèƒ½åŒ–æ“ä½œ 2. é«˜æ•ˆæ€§èƒ½ 3. ç”¨æˆ·å‹å¥½ç•Œé¢ 4. å®‰å…¨å¯é ","Our product has the following features: 1. Intelligent operation 2. High efficiency 3. User-friendly interface 4. Safe and reliable","Ù…Ù†ØªØ¬Ù†Ø§ Ù„Ù‡ Ø§Ù„Ù…ÙŠØ²Ø§Øª Ø§Ù„ØªØ§Ù„ÙŠØ©: 1. ØªØ´ØºÙŠÙ„ Ø°ÙƒÙŠ 2. ÙƒÙØ§Ø¡Ø© Ø¹Ø§Ù„ÙŠØ© 3. ÙˆØ§Ø¬Ù‡Ø© Ø³Ù‡Ù„Ø© Ø§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù… 4. Ø¢Ù…Ù† ÙˆÙ…ÙˆØ«ÙˆÙ‚"),category:"product",isActive:!1,createdAt:new Date("2024-01-05").toISOString(),updatedAt:new Date("2024-01-20").toISOString()}],cr=()=>({defaultAvatars:["https://images.unsplash.com/photo-1494790108755-2616b612b742?w=150&h=150&fit=crop&crop=face","https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=150&h=150&fit=crop&crop=face","https://images.unsplash.com/photo-1438761681033-6461ffad8d80?w=150&h=150&fit=crop&crop=face","https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=150&h=150&fit=crop&crop=face","https://images.unsplash.com/photo-1534528741775-53994a69daeb?w=150&h=150&fit=crop&crop=face","https://images.unsplash.com/photo-1560250097-0b93528c311a?w=150&h=150&fit=crop&crop=face"]}),rt=x.createContext(void 0),F=()=>{const r=x.useContext(rt);if(r===void 0)throw new Error("useData must be used within a DataProvider");return r};function ue(r,s,o){try{const n=localStorage.getItem(r);if(!n)return s;const a=JSON.parse(n);return o&&!o(a)?(console.warn("Invalid data format for key: "+r+", using default value"),s):a}catch(n){return console.warn("Failed to parse localStorage data for key: "+r,n),s}}const dr=r=>Array.isArray(r)&&r.every(s=>s&&typeof s=="object"&&typeof s.id=="string"&&typeof s.botId=="string"),ur=r=>Array.isArray(r)&&r.every(s=>s&&typeof s=="object"&&typeof s.id=="string"&&typeof s.name=="object"),pr=r=>r&&typeof r=="object"&&Array.isArray(r.defaultAvatars),mr=({children:r})=>{Ce.useEffect(()=>{const d="1.0.0";localStorage.getItem("demo_data_version")!==d&&(localStorage.removeItem("demo_characters"),localStorage.removeItem("demo_templates"),localStorage.removeItem("demo_config"),localStorage.setItem("demo_data_version",d),console.log("Data cleaned up for version:",d))},[]);const[s,o]=x.useState(()=>ue("demo_characters",ir(),dr)),[n,a]=x.useState(()=>ue("demo_templates",lr(),ur)),[i,c]=x.useState(()=>ue("demo_config",cr(),pr)),u=x.useCallback((d,y)=>{try{localStorage.setItem(d,JSON.stringify(y))}catch(f){console.error("Failed to save data to localStorage for key: "+d,f)}},[]),T=x.useCallback(d=>{const y={...d,id:k(),botId:`bot_${k()}`,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};o(f=>{const A=[...f,y];return u("demo_characters",A),A})},[u]),h=x.useCallback((d,y)=>{o(f=>{const A=f.map(C=>C.id===d?{...C,...y,updatedAt:new Date().toISOString()}:C);return u("demo_characters",A),A})},[u]),l=x.useCallback(d=>{o(y=>{const f=y.filter(A=>A.id!==d);return u("demo_characters",f),f})},[u]),t=x.useCallback(d=>s.find(y=>y.id===d),[s]),m=x.useCallback(d=>{const y={...d,id:k(),createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};a(f=>{const A=[...f,y];return u("demo_templates",A),A})},[u]),j=x.useCallback((d,y)=>{a(f=>{const A=f.map(C=>C.id===d?{...C,...y,updatedAt:new Date().toISOString()}:C);return u("demo_templates",A),A})},[u]),w=x.useCallback(d=>{a(y=>{const f=y.filter(A=>A.id!==d);return u("demo_templates",f),f})},[u]),p=x.useCallback(d=>n.find(y=>y.id===d),[n]),v=x.useCallback(d=>{c(y=>{const f={...y,...d};return u("demo_config",f),f})},[u]),S=x.useCallback((d,y)=>{const f=s.find(A=>A.id===d);if(f){const A=Array.isArray(f.whitelist)?f.whitelist:[];h(d,{whitelist:[...A,y]})}},[h,s]),N=x.useCallback((d,y)=>{const f=s.find(A=>A.id===d);if(f){const A=Array.isArray(f.whitelist)?f.whitelist:[];h(d,{whitelist:A.filter(C=>C!==y)})}},[h,s]),q={characters:s,addCharacter:T,updateCharacter:h,deleteCharacter:l,getCharacter:t,templates:n,addTemplate:m,updateTemplate:j,deleteTemplate:w,getTemplate:p,config:i,updateConfig:v,addToWhitelist:S,removeFromWhitelist:N};return e.jsx(rt.Provider,{value:q,children:r})},hr=({open:r,onCancel:s,characterId:o,characterName:n})=>{const[a,i]=x.useState(""),[c,u]=x.useState(!1),{characters:T,addToWhitelist:h,removeFromWhitelist:l}=F(),t=T.find(v=>v.id===o),m=Array.isArray(t==null?void 0:t.whitelist)?t.whitelist:[],j=async()=>{if(!a.trim()){I.error("è¯·è¾“å…¥æ‰‹æœºå·");return}if(!g.PHONE.pattern.test(a)){I.error(g.PHONE.message);return}if(m.includes(a)){I.error("è¯¥æ‰‹æœºå·å·²å­˜åœ¨");return}u(!0);try{await new Promise(v=>setTimeout(v,500)),h(o,a),i(""),I.success("æ·»åŠ æˆåŠŸ")}catch{I.error("æ·»åŠ å¤±è´¥")}finally{u(!1)}},w=async v=>{u(!0);try{await new Promise(S=>setTimeout(S,300)),l(o,v),I.success("ç§»é™¤æˆåŠŸ")}catch{I.error("ç§»é™¤å¤±è´¥")}finally{u(!1)}},p=v=>{v.key==="Enter"&&j()};return e.jsxs(ge,{title:e.jsxs("div",{children:[e.jsx(je,{style:{marginRight:8}}),"ç™½åå•ç®¡ç† - ",n]}),open:r,onCancel:s,width:600,footer:null,children:[e.jsx("div",{style:{marginBottom:16},children:e.jsxs(M.Group,{compact:!0,style:{display:"flex"},children:[e.jsx(M,{placeholder:"è¯·è¾“å…¥æ‰‹æœºå·ï¼ˆå¦‚ï¼š13800138000ï¼‰",value:a,onChange:v=>i(v.target.value),onKeyPress:p,style:{flex:1},maxLength:11}),e.jsx(_,{type:"primary",icon:e.jsx(G,{}),onClick:j,loading:c,children:"æ·»åŠ "})]})}),e.jsx("div",{style:{maxHeight:400,overflowY:"auto",border:"1px solid #f0f0f0",borderRadius:6,padding:8},children:m.length===0?e.jsx(fe,{description:"æš‚æ— ç™½åå•ç”¨æˆ·",image:fe.PRESENTED_IMAGE_SIMPLE,style:{padding:"40px 0"}}):e.jsx(ye,{dataSource:m,renderItem:(v,S)=>e.jsx(ye.Item,{actions:[e.jsx(ee,{title:"ç¡®è®¤ç§»é™¤",description:`ç¡®å®šè¦å°† ${v} ä»ç™½åå•ä¸­ç§»é™¤å—ï¼Ÿ`,onConfirm:()=>w(v),okText:"ç¡®è®¤",cancelText:"å–æ¶ˆ",children:e.jsx(_,{type:"text",danger:!0,icon:e.jsx(te,{}),size:"small"})})],style:{padding:"8px 12px",backgroundColor:S%2===0?"#fafafa":"#fff",borderRadius:4,margin:"4px 0"},children:e.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[e.jsx(je,{style:{marginRight:8,color:"#1890ff"}}),e.jsx("span",{style:{fontFamily:"monospace",fontSize:14},children:v})]})},v)})}),e.jsxs("div",{style:{marginTop:16,padding:12,backgroundColor:"#f6f8fa",borderRadius:6,fontSize:12,color:"#666"},children:[e.jsx("div",{style:{marginBottom:4},children:e.jsx("strong",{children:"è¯´æ˜ï¼š"})}),e.jsx("div",{children:"â€¢ åªæœ‰ç™½åå•ä¸­çš„æ‰‹æœºå·æ‰èƒ½è®¿é—®è¯¥ç§æœ‰AIè§’è‰²"}),e.jsx("div",{children:"â€¢ æ‰‹æœºå·æ ¼å¼ï¼šä»¥1å¼€å¤´çš„11ä½æ•°å­—"}),e.jsxs("div",{children:["â€¢ å½“å‰ç™½åå•ç”¨æˆ·æ•°é‡ï¼š",m.length]})]})]})},{Search:xr}=M,{Title:gr,Text:Te}=z,fr=()=>{const r=H(),{characters:s,deleteCharacter:o}=F(),[n,a]=x.useState(""),[i,c]=x.useState({open:!1,characterId:"",characterName:""}),u=x.useMemo(()=>n.trim()?s.filter(t=>{const m=n.toLowerCase();return t.botId.toLowerCase().includes(m)||t.nickname.zh.toLowerCase().includes(m)||t.nickname.en.toLowerCase().includes(m)||t.nickname.ar.toLowerCase().includes(m)}):s,[s,n]),T=async t=>{try{o(t.id),I.success("åˆ é™¤æˆåŠŸ")}catch{I.error("åˆ é™¤å¤±è´¥")}},h=t=>{c({open:!0,characterId:t.id,characterName:t.nickname.zh})},l=[{title:"Bot ID",dataIndex:"botId",key:"botId",width:150,render:t=>e.jsx(Te,{code:!0,style:{fontSize:12},children:t})},{title:"å¤´åƒ",dataIndex:"avatar",key:"avatar",width:80,render:t=>e.jsx(Re,{src:t,size:48})},{title:"æ˜µç§°",dataIndex:"nickname",key:"nickname",render:(t,m)=>e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:500,marginBottom:4},children:t.zh}),e.jsxs("div",{style:{fontSize:12,color:"#666"},children:[m.profession.zh," Â· ",m.region.zh]})]})},{title:"æ€§åˆ«/å¹´é¾„",key:"genderAge",width:100,render:t=>{var j;return`${(j=Je.find(w=>w.value===t.gender))==null?void 0:j.label} / ${t.age}å²`}},{title:"æƒé™",dataIndex:"permission",key:"permission",width:100,render:t=>{const m=Ze.find(j=>j.value===t);return e.jsx(Z,{color:t==="public"?"green":"orange",children:m==null?void 0:m.label})}},{title:"ç™½åå•ç”¨æˆ·",key:"whitelistCount",width:120,render:t=>e.jsx("div",{style:{textAlign:"center"},children:t.permission==="private"?e.jsxs(Z,{color:"blue",children:[t.whitelist.length," äºº"]}):e.jsx(Te,{type:"secondary",children:"-"})})},{title:"æœ€åæ›´æ–°",dataIndex:"updatedAt",key:"updatedAt",width:140,sorter:(t,m)=>D(t.updatedAt).unix()-D(m.updatedAt).unix(),render:t=>e.jsx("div",{style:{fontSize:12},children:D(t).format("YYYY-MM-DD HH:mm")})},{title:"æ“ä½œ",key:"actions",width:200,render:t=>e.jsxs(Y,{size:"small",children:[e.jsx(_,{type:"link",size:"small",icon:e.jsx(ke,{}),onClick:()=>r(`/characters/edit/${t.id}`),children:"æŸ¥çœ‹"}),e.jsx(_,{type:"link",size:"small",icon:e.jsx(Me,{}),onClick:()=>r(`/characters/edit/${t.id}`),children:"ç¼–è¾‘"}),t.permission==="private"&&e.jsx(_,{type:"link",size:"small",icon:e.jsx(jt,{}),onClick:()=>h(t),children:"ç™½åå•"}),e.jsx(ee,{title:"ç¡®è®¤åˆ é™¤",description:e.jsxs("div",{children:[e.jsxs("div",{children:["ç¡®å®šè¦åˆ é™¤è§’è‰² ",e.jsx("strong",{children:t.nickname.zh})," å—ï¼Ÿ"]}),e.jsx("div",{style:{color:"#ff4d4f",fontSize:12,marginTop:4},children:"æ­¤æ“ä½œä¸å¯æ¢å¤"})]}),onConfirm:()=>T(t),okText:"ç¡®è®¤åˆ é™¤",cancelText:"å–æ¶ˆ",okButtonProps:{danger:!0},children:e.jsx(_,{type:"link",size:"small",danger:!0,icon:e.jsx(te,{}),children:"åˆ é™¤"})})]})}];return e.jsxs("div",{children:[e.jsxs("div",{style:{marginBottom:24},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:16},children:[e.jsx(gr,{level:3,style:{margin:0},children:"AIè§’è‰²ç®¡ç†"}),e.jsx(_,{type:"primary",icon:e.jsx(G,{}),onClick:()=>r("/characters/new"),size:"large",children:"æ–°å¢AIè§’è‰²"})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("div",{style:{display:"flex",gap:16,alignItems:"center"},children:e.jsx(xr,{placeholder:"æœç´¢è§’è‰²æ˜µç§°æˆ–Bot ID",style:{width:300},onSearch:a,onChange:t=>a(t.target.value),allowClear:!0})}),e.jsxs("div",{style:{color:"#666",fontSize:14},children:["å…± ",u.length," ä¸ªè§’è‰²"]})]})]}),e.jsx(P,{children:e.jsx(Le,{columns:l,dataSource:u,rowKey:"id",pagination:{...tt,total:u.length,showTotal:(t,m)=>`ç¬¬ ${m[0]}-${m[1]} æ¡ï¼Œå…± ${t} æ¡`},scroll:{x:1200}})}),e.jsx(hr,{open:i.open,onCancel:()=>c({open:!1,characterId:"",characterName:""}),characterId:i.characterId,characterName:i.characterName})]})},st=({activeLanguage:r,onChange:s,className:o="language-tabs"})=>{const n=er.map(a=>({key:a.key,label:e.jsxs("span",{children:[a.flag," ",a.label]})}));return e.jsx(vt,{activeKey:r,onChange:a=>s(a),items:n,className:o,size:"large",type:"card"})},Ie=({value:r=[],onChange:s,maxCount:o=1,listType:n="picture-card",disabled:a=!1})=>{const[i,c]=x.useState(!1),[u,T]=x.useState(""),[h,l]=x.useState(""),t=d=>new Promise(y=>{setTimeout(()=>{const f=URL.createObjectURL(d);y(f)},1e3)}),m=d=>new Promise((y,f)=>{const A=new FileReader;A.readAsDataURL(d),A.onload=()=>y(A.result),A.onerror=C=>f(C)}),j=Array.isArray(r)?r.map((d,y)=>({uid:`${y}`,name:`image-${y}.jpg`,status:"done",url:d})):[],w=async d=>{!d.url&&!d.preview&&(d.preview=await m(d.originFileObj)),T(d.url||d.preview),c(!0),l(d.name||d.url.substring(d.url.lastIndexOf("/")+1))},p=d=>X.ACCEPTED_IMAGE_TYPES.includes(d.type)?d.size<=X.MAX_FILE_SIZE?!0:(I.error("å›¾ç‰‡å¤§å°ä¸èƒ½è¶…è¿‡ 5MBï¼"),!1):(I.error("åªèƒ½ä¸Šä¼  JPG/PNG/GIF/WebP æ ¼å¼çš„å›¾ç‰‡ï¼"),!1),v=async d=>{const{file:y,onSuccess:f,onError:A}=d;try{const C=await t(y);f({url:C},y)}catch(C){console.error("Upload failed:",C),A(C)}},S=({fileList:d})=>{const y=d.filter(f=>f.status==="done").map(f=>{var A;return((A=f.response)==null?void 0:A.url)||f.url}).filter(Boolean);s==null||s(y)},N=d=>{const y=Array.isArray(r)?r.filter(f=>f!==d.url):[];s==null||s(y)},q=e.jsxs("div",{children:[e.jsx(G,{}),e.jsx("div",{style:{marginTop:8},children:"ä¸Šä¼ å›¾ç‰‡"})]});return e.jsxs(e.Fragment,{children:[e.jsx(Ne,{customRequest:v,listType:n,fileList:j,onPreview:w,onChange:S,onRemove:N,beforeUpload:p,disabled:a,multiple:o>1,children:j.length>=o?null:q}),e.jsx(ge,{open:i,title:h,footer:null,onCancel:()=>c(!1),children:e.jsx("img",{alt:"preview",style:{width:"100%"},src:u})})]})},{Title:yr}=z,{TextArea:pe}=M,be=()=>{const[r]=b.useForm(),s=H(),{id:o}=Pe(),n=!!o,{addCharacter:a,updateCharacter:i,getCharacter:c}=F(),[u,T]=x.useState(!1),[h,l]=x.useState("zh"),[t,m]=x.useState(null);x.useEffect(()=>{if(n&&o){const p=c(o);p?(m(p),r.setFieldsValue({...p,nickname:p.nickname[h],region:p.region[h],profession:p.profession[h],introduction:p.introduction[h],tags:Array.isArray(p.tags[h])?p.tags[h]:[],greeting:p.greeting[h]})):(I.error("è§’è‰²ä¸å­˜åœ¨"),s("/characters"))}else r.setFieldsValue({avatar:U.CHARACTER.AVATAR,gender:U.CHARACTER.GENDER,age:U.CHARACTER.AGE,permission:U.CHARACTER.PERMISSION,displayImages:[],tags:[]})},[n,o,c,r,s,h]),x.useEffect(()=>{t&&r.setFieldsValue({nickname:t.nickname[h],region:t.region[h],profession:t.profession[h],introduction:t.introduction[h],tags:Array.isArray(t.tags[h])?t.tags[h]:[],greeting:t.greeting[h]})},[h,t,r]);const j=(p,v)=>({...v||{zh:"",en:"",ar:""},[h]:p||""}),w=async p=>{T(!0);try{const v={nickname:j(p.nickname,t==null?void 0:t.nickname),region:j(p.region,t==null?void 0:t.region),profession:j(p.profession,t==null?void 0:t.profession),introduction:j(p.introduction,t==null?void 0:t.introduction),greeting:j(p.greeting,t==null?void 0:t.greeting),tags:{...t!=null&&t.tags&&typeof t.tags=="object"?t.tags:{zh:[],en:[],ar:[]},[h]:Array.isArray(p.tags)?p.tags:[]}},S={avatar:p.avatar,gender:p.gender,age:p.age,permission:p.permission,displayImages:Array.isArray(p.displayImages)?p.displayImages:[],systemPrompt:p.systemPrompt||"",whitelist:Array.isArray(t==null?void 0:t.whitelist)?t.whitelist:[],...v};await new Promise(N=>setTimeout(N,1e3)),n&&t?(i(t.id,S),I.success("æ›´æ–°æˆåŠŸ")):(a(S),I.success("åˆ›å»ºæˆåŠŸ")),s("/characters")}catch(v){I.error(n?"æ›´æ–°å¤±è´¥":"åˆ›å»ºå¤±è´¥"),console.error("Submit error:",v)}finally{T(!1)}};return e.jsxs("div",{children:[e.jsx("div",{style:{marginBottom:24},children:e.jsxs(Y,{children:[e.jsx(_,{icon:e.jsx(Oe,{}),onClick:()=>s("/characters"),children:"è¿”å›åˆ—è¡¨"}),e.jsx(yr,{level:3,style:{margin:0},children:n?"ç¼–è¾‘AIè§’è‰²":"æ–°å¢AIè§’è‰²"}),n&&t&&e.jsxs(Z,{color:"blue",children:["Bot ID: ",t.botId]})]})}),e.jsx(P,{children:e.jsxs(b,{form:r,layout:"vertical",onFinish:w,scrollToFirstError:!0,children:[e.jsxs(B,{gutter:24,children:[e.jsxs($,{xs:24,lg:12,children:[e.jsxs(P,{title:"åŸºæœ¬ä¿¡æ¯",size:"small",style:{marginBottom:24},children:[e.jsx(b.Item,{name:"avatar",label:"å¤´åƒ",rules:[g.REQUIRED],children:e.jsx(Ie,{maxCount:1})}),e.jsxs(B,{gutter:16,children:[e.jsx($,{span:12,children:e.jsx(b.Item,{name:"gender",label:"æ€§åˆ«",rules:[g.REQUIRED],children:e.jsx(K,{options:Je})})}),e.jsx($,{span:12,children:e.jsx(b.Item,{name:"age",label:"å¹´é¾„",rules:[g.REQUIRED,g.AGE],children:e.jsx(At,{min:1,max:150,style:{width:"100%"}})})})]}),e.jsx(b.Item,{name:"permission",label:"æƒé™è®¾ç½®",rules:[g.REQUIRED],children:e.jsx(K,{options:Ze})})]}),e.jsx(P,{title:"åª’ä½“ä¿¡æ¯",size:"small",style:{marginBottom:24},children:e.jsx(b.Item,{name:"displayImages",label:"å±•ç¤ºå›¾ç‰‡",help:"æœ€å¤šå¯ä¸Šä¼ 6å¼ å±•ç¤ºå›¾ç‰‡",children:e.jsx(Ie,{maxCount:6})})}),e.jsx(P,{title:"é«˜çº§è®¾ç½®",size:"small",children:e.jsx(b.Item,{name:"systemPrompt",label:"System Prompt",help:"ç³»ç»Ÿæç¤ºè¯ï¼Œç”¨äºæŒ‡å¯¼AIçš„è¡Œä¸ºå’Œå›å¤é£æ ¼",rules:[{max:g.MAX_LENGTH.SYSTEM_PROMPT,message:`æœ€å¤š${g.MAX_LENGTH.SYSTEM_PROMPT}ä¸ªå­—ç¬¦`}],children:e.jsx(pe,{rows:6,placeholder:"è¾“å…¥ç³»ç»Ÿæç¤ºè¯ï¼Œä¾‹å¦‚ï¼šYou are a helpful and friendly AI assistant...",showCount:!0,maxLength:g.MAX_LENGTH.SYSTEM_PROMPT})})})]}),e.jsx($,{xs:24,lg:12,children:e.jsxs(P,{title:"å¤šè¯­è¨€ä¿¡æ¯",size:"small",extra:e.jsx(st,{activeLanguage:h,onChange:l}),children:[e.jsx(b.Item,{name:"nickname",label:"æ˜µç§°",rules:[g.REQUIRED,{max:g.MAX_LENGTH.NICKNAME,message:`æœ€å¤š${g.MAX_LENGTH.NICKNAME}ä¸ªå­—ç¬¦`}],children:e.jsx(M,{placeholder:"è¾“å…¥è§’è‰²æ˜µç§°",maxLength:g.MAX_LENGTH.NICKNAME})}),e.jsxs(B,{gutter:16,children:[e.jsx($,{span:12,children:e.jsx(b.Item,{name:"region",label:"åœ°åŒº",rules:[g.REQUIRED,{max:g.MAX_LENGTH.REGION,message:`æœ€å¤š${g.MAX_LENGTH.REGION}ä¸ªå­—ç¬¦`}],children:e.jsx(M,{placeholder:"å¦‚ï¼šåŒ—äº¬",maxLength:g.MAX_LENGTH.REGION})})}),e.jsx($,{span:12,children:e.jsx(b.Item,{name:"profession",label:"èŒä¸š",rules:[g.REQUIRED,{max:g.MAX_LENGTH.PROFESSION,message:`æœ€å¤š${g.MAX_LENGTH.PROFESSION}ä¸ªå­—ç¬¦`}],children:e.jsx(M,{placeholder:"å¦‚ï¼šAIåŠ©æ‰‹",maxLength:g.MAX_LENGTH.PROFESSION})})})]}),e.jsx(b.Item,{name:"introduction",label:"ä»‹ç»",rules:[g.REQUIRED,{max:g.MAX_LENGTH.INTRODUCTION,message:`æœ€å¤š${g.MAX_LENGTH.INTRODUCTION}ä¸ªå­—ç¬¦`}],children:e.jsx(pe,{rows:4,placeholder:"è¾“å…¥è§’è‰²ä»‹ç»",showCount:!0,maxLength:g.MAX_LENGTH.INTRODUCTION})}),e.jsx(b.Item,{name:"tags",label:"æ ‡ç­¾",help:"è¾“å…¥æ ‡ç­¾åæŒ‰å›è½¦é”®æ·»åŠ ",children:e.jsx(K,{mode:"tags",placeholder:"æ·»åŠ æ ‡ç­¾",maxTagCount:5,maxTagTextLength:g.MAX_LENGTH.TAG})}),e.jsx(b.Item,{name:"greeting",label:"å¼€åœºç™½",rules:[g.REQUIRED,{max:g.MAX_LENGTH.GREETING,message:`æœ€å¤š${g.MAX_LENGTH.GREETING}ä¸ªå­—ç¬¦`}],children:e.jsx(pe,{rows:3,placeholder:"è¾“å…¥è§’è‰²çš„å¼€åœºç™½",showCount:!0,maxLength:g.MAX_LENGTH.GREETING})})]})})]}),e.jsx(De,{}),e.jsx("div",{style:{textAlign:"center"},children:e.jsxs(Y,{children:[e.jsx(_,{size:"large",onClick:()=>s("/characters"),children:"å–æ¶ˆ"}),e.jsx(_,{type:"primary",htmlType:"submit",loading:u,size:"large",icon:e.jsx($e,{}),children:u?"ä¿å­˜ä¸­...":n?"æ›´æ–°è§’è‰²":"åˆ›å»ºè§’è‰²"})]})})]})})]})},{Search:jr}=M,{Title:vr}=z,Ar=()=>{const r=H(),{templates:s,deleteTemplate:o,updateTemplate:n}=F(),[a,i]=x.useState(""),c=x.useMemo(()=>a.trim()?s.filter(l=>{const t=a.toLowerCase();return l.name.zh.toLowerCase().includes(t)||l.name.en.toLowerCase().includes(t)||l.name.ar.toLowerCase().includes(t)||l.description.zh.toLowerCase().includes(t)||l.description.en.toLowerCase().includes(t)||l.description.ar.toLowerCase().includes(t)||l.category.toLowerCase().includes(t)}):s,[s,a]),u=async l=>{try{o(l.id),I.success("åˆ é™¤æˆåŠŸ")}catch{I.error("åˆ é™¤å¤±è´¥")}},T=async(l,t)=>{try{n(l.id,{isActive:t}),I.success(t?"å·²å¯ç”¨":"å·²ç¦ç”¨")}catch{I.error("æ“ä½œå¤±è´¥")}},h=[{title:"æ¨¡æ¿åç§°",dataIndex:"name",key:"name",render:(l,t)=>e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:500,marginBottom:4},children:l.zh}),e.jsx("div",{style:{fontSize:12,color:"#666"},children:t.description.zh})]})},{title:"åˆ†ç±»",dataIndex:"category",key:"category",width:120,render:l=>{const t=et.find(m=>m.value===l);return e.jsx(Z,{color:"blue",children:(t==null?void 0:t.label)||l})}},{title:"çŠ¶æ€",dataIndex:"isActive",key:"isActive",width:100,render:(l,t)=>e.jsx(ze,{checked:l,onChange:m=>T(t,m),checkedChildren:"å¯ç”¨",unCheckedChildren:"ç¦ç”¨"})},{title:"åˆ›å»ºæ—¶é—´",dataIndex:"createdAt",key:"createdAt",width:140,sorter:(l,t)=>D(l.createdAt).unix()-D(t.createdAt).unix(),render:l=>e.jsx("div",{style:{fontSize:12},children:D(l).format("YYYY-MM-DD HH:mm")})},{title:"æœ€åæ›´æ–°",dataIndex:"updatedAt",key:"updatedAt",width:140,sorter:(l,t)=>D(l.updatedAt).unix()-D(t.updatedAt).unix(),render:l=>e.jsx("div",{style:{fontSize:12},children:D(l).format("YYYY-MM-DD HH:mm")})},{title:"æ“ä½œ",key:"actions",width:150,render:l=>e.jsxs(Y,{size:"small",children:[e.jsx(_,{type:"link",size:"small",icon:e.jsx(Me,{}),onClick:()=>r(`/templates/edit/${l.id}`),children:"ç¼–è¾‘"}),e.jsx(ee,{title:"ç¡®è®¤åˆ é™¤",description:e.jsxs("div",{children:[e.jsxs("div",{children:["ç¡®å®šè¦åˆ é™¤æ¨¡æ¿ ",e.jsx("strong",{children:l.name.zh})," å—ï¼Ÿ"]}),e.jsx("div",{style:{color:"#ff4d4f",fontSize:12,marginTop:4},children:"æ­¤æ“ä½œä¸å¯æ¢å¤"})]}),onConfirm:()=>u(l),okText:"ç¡®è®¤åˆ é™¤",cancelText:"å–æ¶ˆ",okButtonProps:{danger:!0},children:e.jsx(_,{type:"link",size:"small",danger:!0,icon:e.jsx(te,{}),children:"åˆ é™¤"})})]})}];return e.jsxs("div",{children:[e.jsxs("div",{style:{marginBottom:24},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:16},children:[e.jsx(vr,{level:3,style:{margin:0},children:"æ¨¡æ¿ç®¡ç†"}),e.jsx(_,{type:"primary",icon:e.jsx(G,{}),onClick:()=>r("/templates/new"),size:"large",children:"æ–°å¢æ¨¡æ¿"})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("div",{style:{display:"flex",gap:16,alignItems:"center"},children:e.jsx(jr,{placeholder:"æœç´¢æ¨¡æ¿åç§°ã€æè¿°æˆ–åˆ†ç±»",style:{width:300},onSearch:i,onChange:l=>i(l.target.value),allowClear:!0})}),e.jsxs("div",{style:{color:"#666",fontSize:14},children:["å…± ",c.length," ä¸ªæ¨¡æ¿ ï¼ˆå¯ç”¨ ",c.filter(l=>l.isActive).length," ä¸ªï¼‰"]})]})]}),e.jsx(P,{children:e.jsx(Le,{columns:h,dataSource:c,rowKey:"id",pagination:{...tt,total:c.length,showTotal:(l,t)=>`ç¬¬ ${t[0]}-${t[1]} æ¡ï¼Œå…± ${l} æ¡`}})})]})},{Title:Tr}=z,{TextArea:_e}=M,Ee=()=>{const[r]=b.useForm(),s=H(),{id:o}=Pe(),n=!!o,{addTemplate:a,updateTemplate:i,getTemplate:c}=F(),[u,T]=x.useState(!1),[h,l]=x.useState("zh"),[t,m]=x.useState(null);x.useEffect(()=>{if(n&&o){const p=c(o);p?(m(p),r.setFieldsValue({...p,name:p.name[h],description:p.description[h],content:p.content[h]})):(I.error("æ¨¡æ¿ä¸å­˜åœ¨"),s("/templates"))}else r.setFieldsValue({category:U.TEMPLATE.CATEGORY,isActive:U.TEMPLATE.IS_ACTIVE})},[n,o,c,r,s,h]),x.useEffect(()=>{t&&r.setFieldsValue({name:t.name[h],description:t.description[h],content:t.content[h]})},[h,t,r]);const j=(p,v)=>({...v||{zh:"",en:"",ar:""},[h]:p||""}),w=async p=>{T(!0);try{const v={name:j(p.name,t==null?void 0:t.name),description:j(p.description,t==null?void 0:t.description),content:j(p.content,t==null?void 0:t.content)},S={category:p.category,isActive:p.isActive,...v};await new Promise(N=>setTimeout(N,1e3)),n&&t?(i(t.id,S),I.success("æ›´æ–°æˆåŠŸ")):(a(S),I.success("åˆ›å»ºæˆåŠŸ")),s("/templates")}catch(v){I.error(n?"æ›´æ–°å¤±è´¥":"åˆ›å»ºå¤±è´¥"),console.error("Submit error:",v)}finally{T(!1)}};return e.jsxs("div",{children:[e.jsx("div",{style:{marginBottom:24},children:e.jsxs(Y,{children:[e.jsx(_,{icon:e.jsx(Oe,{}),onClick:()=>s("/templates"),children:"è¿”å›åˆ—è¡¨"}),e.jsx(Tr,{level:3,style:{margin:0},children:n?"ç¼–è¾‘æ¨¡æ¿":"æ–°å¢æ¨¡æ¿"})]})}),e.jsx(P,{children:e.jsxs(b,{form:r,layout:"vertical",onFinish:w,scrollToFirstError:!0,children:[e.jsxs(B,{gutter:24,children:[e.jsx($,{xs:24,lg:8,children:e.jsxs(P,{title:"åŸºæœ¬ä¿¡æ¯",size:"small",children:[e.jsx(b.Item,{name:"category",label:"åˆ†ç±»",rules:[g.REQUIRED],children:e.jsx(K,{options:et})}),e.jsx(b.Item,{name:"isActive",label:"çŠ¶æ€",valuePropName:"checked",children:e.jsx(ze,{checkedChildren:"å¯ç”¨",unCheckedChildren:"ç¦ç”¨"})})]})}),e.jsx($,{xs:24,lg:16,children:e.jsxs(P,{title:"å¤šè¯­è¨€ä¿¡æ¯",size:"small",extra:e.jsx(st,{activeLanguage:h,onChange:l}),children:[e.jsx(b.Item,{name:"name",label:"æ¨¡æ¿åç§°",rules:[g.REQUIRED,{max:g.MAX_LENGTH.TEMPLATE_NAME,message:`æœ€å¤š${g.MAX_LENGTH.TEMPLATE_NAME}ä¸ªå­—ç¬¦`}],children:e.jsx(M,{placeholder:"è¾“å…¥æ¨¡æ¿åç§°",maxLength:g.MAX_LENGTH.TEMPLATE_NAME})}),e.jsx(b.Item,{name:"description",label:"æ¨¡æ¿æè¿°",rules:[g.REQUIRED,{max:g.MAX_LENGTH.TEMPLATE_DESCRIPTION,message:`æœ€å¤š${g.MAX_LENGTH.TEMPLATE_DESCRIPTION}ä¸ªå­—ç¬¦`}],children:e.jsx(_e,{rows:3,placeholder:"è¾“å…¥æ¨¡æ¿æè¿°",showCount:!0,maxLength:g.MAX_LENGTH.TEMPLATE_DESCRIPTION})}),e.jsx(b.Item,{name:"content",label:"æ¨¡æ¿å†…å®¹",rules:[g.REQUIRED,{max:g.MAX_LENGTH.TEMPLATE_CONTENT,message:`æœ€å¤š${g.MAX_LENGTH.TEMPLATE_CONTENT}ä¸ªå­—ç¬¦`}],children:e.jsx(_e,{rows:12,placeholder:"è¾“å…¥æ¨¡æ¿å†…å®¹...",showCount:!0,maxLength:g.MAX_LENGTH.TEMPLATE_CONTENT})})]})})]}),e.jsx(De,{}),e.jsx("div",{style:{textAlign:"center"},children:e.jsxs(Y,{children:[e.jsx(_,{size:"large",onClick:()=>s("/templates"),children:"å–æ¶ˆ"}),e.jsx(_,{type:"primary",htmlType:"submit",loading:u,size:"large",icon:e.jsx($e,{}),children:u?"ä¿å­˜ä¸­...":n?"æ›´æ–°æ¨¡æ¿":"åˆ›å»ºæ¨¡æ¿"})]})})]})})]})},{Title:Ir,Text:me}=z,br=()=>{const{config:r,updateConfig:s}=F(),[o,n]=x.useState(!1),[a,i]=x.useState(""),[c,u]=x.useState(""),T=m=>new Promise(j=>{setTimeout(()=>{const w=URL.createObjectURL(m);j(w)},1e3)}),h=async m=>{const{file:j,onSuccess:w,onError:p}=m;try{if(!X.ACCEPTED_IMAGE_TYPES.includes(j.type)){I.error("åªèƒ½ä¸Šä¼  JPG/PNG/GIF/WebP æ ¼å¼çš„å›¾ç‰‡ï¼"),p(new Error("Invalid file type"));return}if(!(j.size<=X.MAX_FILE_SIZE)){I.error("å›¾ç‰‡å¤§å°ä¸èƒ½è¶…è¿‡ 5MBï¼"),p(new Error("File too large"));return}const N=await T(j),d=[...Array.isArray(r.defaultAvatars)?r.defaultAvatars:[],N];s({defaultAvatars:d}),I.success("å¤´åƒä¸Šä¼ æˆåŠŸ"),w({url:N},j)}catch(v){console.error("Upload failed:",v),I.error("ä¸Šä¼ å¤±è´¥"),p(v)}},l=m=>{const w=(Array.isArray(r.defaultAvatars)?r.defaultAvatars:[]).filter(p=>p!==m);s({defaultAvatars:w}),I.success("åˆ é™¤æˆåŠŸ")},t=m=>{i(m),u("é»˜è®¤å¤´åƒé¢„è§ˆ"),n(!0)};return e.jsxs("div",{children:[e.jsxs("div",{style:{marginBottom:24},children:[e.jsx(Ir,{level:3,style:{margin:0},children:"é€šç”¨é…ç½®"}),e.jsx(me,{type:"secondary",children:"ç®¡ç†ç³»ç»Ÿçš„é€šç”¨é…ç½®ä¿¡æ¯"})]}),e.jsxs(P,{title:"é»˜è®¤å¤´åƒç®¡ç†",style:{marginBottom:24},children:[e.jsxs("div",{style:{marginBottom:16},children:[e.jsx(Ne,{customRequest:h,showUploadList:!1,accept:X.ACCEPTED_IMAGE_TYPES.join(","),children:e.jsx(_,{type:"primary",icon:e.jsx(G,{}),children:"ä¸Šä¼ æ–°å¤´åƒ"})}),e.jsx(me,{type:"secondary",style:{marginLeft:12},children:"æ”¯æŒ JPGã€PNGã€GIFã€WebP æ ¼å¼ï¼Œå¤§å°ä¸è¶…è¿‡ 5MB"})]}),e.jsx("div",{style:{border:"1px solid #f0f0f0",borderRadius:8,padding:16,minHeight:200,backgroundColor:"#fafafa"},children:!Array.isArray(r.defaultAvatars)||r.defaultAvatars.length===0?e.jsxs("div",{style:{textAlign:"center",padding:"60px 0",color:"#999"},children:[e.jsx(G,{style:{fontSize:48,marginBottom:16}}),e.jsx("div",{children:"æš‚æ— é»˜è®¤å¤´åƒ"}),e.jsx("div",{style:{fontSize:12,marginTop:8},children:"ç‚¹å‡»ä¸Šæ–¹æŒ‰é’®ä¸Šä¼ å¤´åƒ"})]}):e.jsx(B,{gutter:[16,16],children:r.defaultAvatars.map((m,j)=>e.jsx($,{xs:12,sm:8,md:6,lg:4,children:e.jsx(P,{hoverable:!0,size:"small",cover:e.jsx("div",{style:{height:120,background:`url(${m}) center/cover`,borderRadius:"8px 8px 0 0"}}),actions:[e.jsx(_,{type:"text",icon:e.jsx(ke,{}),onClick:()=>t(m)},"preview"),e.jsx(ee,{title:"ç¡®è®¤åˆ é™¤",description:"ç¡®å®šè¦åˆ é™¤è¿™ä¸ªé»˜è®¤å¤´åƒå—ï¼Ÿ",onConfirm:()=>l(m),okText:"ç¡®è®¤",cancelText:"å–æ¶ˆ",children:e.jsx(_,{type:"text",danger:!0,icon:e.jsx(te,{})})},"delete")],children:e.jsx(P.Meta,{title:`å¤´åƒ ${j+1}`,description:e.jsx(me,{type:"secondary",style:{fontSize:12},children:"é»˜è®¤å¤´åƒ"})})})},j))})}),e.jsxs("div",{style:{marginTop:16,padding:12,backgroundColor:"#f6f8fa",borderRadius:6,fontSize:12,color:"#666"},children:[e.jsx("div",{style:{marginBottom:4},children:e.jsx("strong",{children:"è¯´æ˜ï¼š"})}),e.jsx("div",{children:"â€¢ é»˜è®¤å¤´åƒå°†åœ¨åˆ›å»ºAIè§’è‰²æ—¶ä½œä¸ºå¤´åƒé€‰é¡¹æä¾›"}),e.jsx("div",{children:"â€¢ å»ºè®®ä¸Šä¼ å°ºå¯¸ä¸º 150x150 åƒç´ çš„æ­£æ–¹å½¢å›¾ç‰‡"}),e.jsxs("div",{children:["â€¢ å½“å‰é»˜è®¤å¤´åƒæ•°é‡ï¼š",Array.isArray(r.defaultAvatars)?r.defaultAvatars.length:0]})]})]}),e.jsx(ge,{open:o,title:c,footer:null,onCancel:()=>n(!1),children:e.jsx("img",{alt:"preview",style:{width:"100%"},src:a})})]})},{Title:_r,Text:we}=z,Er=()=>e.jsxs("div",{children:[e.jsx(_r,{level:2,children:"æµ‹è¯•é¡µé¢"}),e.jsxs(P,{children:[e.jsx(we,{children:"è¿™æ˜¯ä¸€ä¸ªç®€å•çš„æµ‹è¯•é¡µé¢ï¼Œç”¨æ¥éªŒè¯è·¯ç”±æ˜¯å¦æ­£å¸¸å·¥ä½œã€‚"}),e.jsx("br",{}),e.jsx(we,{type:"secondary",children:"å¦‚æœæ‚¨èƒ½çœ‹åˆ°è¿™ä¸ªé¡µé¢ï¼Œè¯´æ˜è·¯ç”±é…ç½®æ˜¯æ­£ç¡®çš„ã€‚"})]})]}),{Title:Se,Text:wr}=z,Sr=()=>{const r=H();return e.jsxs("div",{children:[e.jsx("div",{style:{marginBottom:24},children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:16},children:[e.jsx(Se,{level:3,style:{margin:0},children:"AIè§’è‰²ç®¡ç†ï¼ˆç®€åŒ–ç‰ˆï¼‰"}),e.jsx(_,{type:"primary",icon:e.jsx(G,{}),onClick:()=>r("/characters/new"),size:"large",children:"æ–°å¢AIè§’è‰²"})]})}),e.jsx(P,{children:e.jsxs("div",{style:{textAlign:"center",padding:"60px 0"},children:[e.jsx(J,{style:{fontSize:48,marginBottom:16,color:"#1890ff"}}),e.jsxs("div",{children:[e.jsx(Se,{level:4,children:"ç®€åŒ–çš„è§’è‰²åˆ—è¡¨é¡µé¢"}),e.jsx(wr,{type:"secondary",children:"è¿™æ˜¯ä¸€ä¸ªä¸ä¾èµ–æ•°æ®ä¸Šä¸‹æ–‡çš„ç®€åŒ–ç‰ˆæœ¬ï¼Œç”¨äºæµ‹è¯•è·¯ç”±æ˜¯å¦æ­£å¸¸å·¥ä½œã€‚"})]}),e.jsx("div",{style:{marginTop:24},children:e.jsxs(Y,{children:[e.jsx(_,{onClick:()=>r("/test"),children:"æµ‹è¯•é¡µé¢"}),e.jsx(_,{onClick:()=>r("/config"),children:"é€šç”¨é…ç½®"}),e.jsx(_,{type:"primary",ghost:!0,onClick:()=>r("/characters"),children:"å®Œæ•´è§’è‰²åˆ—è¡¨"})]})})]})})]})};I.config({top:100,duration:3,maxCount:3});const O=({children:r})=>{const{isAuthenticated:s}=de();return s?e.jsx(ar,{children:r}):e.jsx(Q,{to:"/login",replace:!0})},Cr=({children:r})=>{const{isAuthenticated:s}=de();return s?e.jsx(Q,{to:"/simple",replace:!0}):e.jsx(e.Fragment,{children:r})};function Pr(){return e.jsx(Kt,{children:e.jsx(mr,{children:e.jsxs(lt,{children:[e.jsx(L,{path:"/login",element:e.jsx(Cr,{children:e.jsx(Zt,{})})}),e.jsx(L,{path:"/",element:e.jsx(Q,{to:"/simple",replace:!0})}),e.jsx(L,{path:"/test",element:e.jsx(O,{children:e.jsx(Er,{})})}),e.jsx(L,{path:"/simple",element:e.jsx(O,{children:e.jsx(Sr,{})})}),e.jsx(L,{path:"/characters",element:e.jsx(O,{children:e.jsx(fr,{})})}),e.jsx(L,{path:"/characters/new",element:e.jsx(O,{children:e.jsx(be,{})})}),e.jsx(L,{path:"/characters/edit/:id",element:e.jsx(O,{children:e.jsx(be,{})})}),e.jsx(L,{path:"/templates",element:e.jsx(O,{children:e.jsx(Ar,{})})}),e.jsx(L,{path:"/templates/new",element:e.jsx(O,{children:e.jsx(Ee,{})})}),e.jsx(L,{path:"/templates/edit/:id",element:e.jsx(O,{children:e.jsx(Ee,{})})}),e.jsx(L,{path:"/config",element:e.jsx(O,{children:e.jsx(br,{})})}),e.jsx(L,{path:"*",element:e.jsx(Q,{to:"/simple",replace:!0})})]})})})}xe.createRoot(document.getElementById("root")).render(e.jsx(Ce.StrictMode,{children:e.jsx(ct,{children:e.jsx(Tt,{locale:Wt,children:e.jsx(Pr,{})})})}));
