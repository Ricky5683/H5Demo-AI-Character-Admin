import{r as x,c as et,g as tt,e as rt,u as H,f as st,h as Ae,i as nt,j as N,N as Q,R as at,H as ot}from"./vendor-BT3SA_Mp.js";import{r as it,T as U,F as _,C as P,I as k,R as pe,a as lt,B as S,s as I,L as me,M as ct,b as dt,c as ut,D as pt,A as Se,d as mt,e as ht,f as xt,g as xe,h as G,E as ge,i as fe,j as ye,P as Z,k as ee,l as we,m as J,n as O,S as Y,o as Ce,p as Pe,q as gt,t as ft,U as Re,u as Le,v as B,w as D,x as K,y as yt,z as ke,G as Me,H as Ne,J as jt}from"./antd-uuZQaa5X.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))a(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const c of i.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&a(c)}).observe(document,{childList:!0,subtree:!0});function o(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerPolicy&&(i.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?i.credentials="include":n.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function a(n){if(n.ep)return;n.ep=!0;const i=o(n);fetch(n.href,i)}})();var Oe={exports:{}},te={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vt=x,Tt=Symbol.for("react.element"),It=Symbol.for("react.fragment"),bt=Object.prototype.hasOwnProperty,_t=vt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Et={key:!0,ref:!0,__self:!0,__source:!0};function De(r,s,o){var a,n={},i=null,c=null;o!==void 0&&(i=""+o),s.key!==void 0&&(i=""+s.key),s.ref!==void 0&&(c=s.ref);for(a in s)bt.call(s,a)&&!Et.hasOwnProperty(a)&&(n[a]=s[a]);if(r&&r.defaultProps)for(a in s=r.defaultProps,s)n[a]===void 0&&(n[a]=s[a]);return{$$typeof:Tt,type:r,key:i,ref:c,props:n,_owner:_t.current}}te.Fragment=It;te.jsx=De;te.jsxs=De;Oe.exports=te;var e=Oe.exports,he={},je=et;he.createRoot=je.createRoot,he.hydrateRoot=je.hydrateRoot;var re={},$e={exports:{}};(function(r){function s(o){return o&&o.__esModule?o:{default:o}}r.exports=s,r.exports.__esModule=!0,r.exports.default=r.exports})($e);var se=$e.exports,ne={};Object.defineProperty(ne,"__esModule",{value:!0});ne.default=void 0;var At={items_per_page:"æ¡/é¡µ",jump_to:"è·³è‡³",jump_to_confirm:"ç¡®å®š",page:"é¡µ",prev_page:"ä¸Šä¸€é¡µ",next_page:"ä¸‹ä¸€é¡µ",prev_5:"å‘å‰ 5 é¡µ",next_5:"å‘å 5 é¡µ",prev_3:"å‘å‰ 3 é¡µ",next_3:"å‘å 3 é¡µ",page_size:"é¡µç "};ne.default=At;var ae={},V={},oe={},ze={exports:{}},Ge={exports:{}},Ye={exports:{}},He={exports:{}};(function(r){function s(o){"@babel/helpers - typeof";return r.exports=s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(a){return typeof a}:function(a){return a&&typeof Symbol=="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},r.exports.__esModule=!0,r.exports.default=r.exports,s(o)}r.exports=s,r.exports.__esModule=!0,r.exports.default=r.exports})(He);var Ue=He.exports,Fe={exports:{}};(function(r){var s=Ue.default;function o(a,n){if(s(a)!="object"||!a)return a;var i=a[Symbol.toPrimitive];if(i!==void 0){var c=i.call(a,n||"default");if(s(c)!="object")return c;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(a)}r.exports=o,r.exports.__esModule=!0,r.exports.default=r.exports})(Fe);var St=Fe.exports;(function(r){var s=Ue.default,o=St;function a(n){var i=o(n,"string");return s(i)=="symbol"?i:i+""}r.exports=a,r.exports.__esModule=!0,r.exports.default=r.exports})(Ye);var wt=Ye.exports;(function(r){var s=wt;function o(a,n,i){return(n=s(n))in a?Object.defineProperty(a,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):a[n]=i,a}r.exports=o,r.exports.__esModule=!0,r.exports.default=r.exports})(Ge);var Ct=Ge.exports;(function(r){var s=Ct;function o(n,i){var c=Object.keys(n);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(n);i&&(u=u.filter(function(T){return Object.getOwnPropertyDescriptor(n,T).enumerable})),c.push.apply(c,u)}return c}function a(n){for(var i=1;i<arguments.length;i++){var c=arguments[i]!=null?arguments[i]:{};i%2?o(Object(c),!0).forEach(function(u){s(n,u,c[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(c)):o(Object(c)).forEach(function(u){Object.defineProperty(n,u,Object.getOwnPropertyDescriptor(c,u))})}return n}r.exports=a,r.exports.__esModule=!0,r.exports.default=r.exports})(ze);var Pt=ze.exports,ie={};Object.defineProperty(ie,"__esModule",{value:!0});ie.commonLocale=void 0;ie.commonLocale={yearFormat:"YYYY",dayFormat:"D",cellMeridiemFormat:"A",monthBeforeYear:!0};var Rt=se.default;Object.defineProperty(oe,"__esModule",{value:!0});oe.default=void 0;var ve=Rt(Pt),Lt=ie,kt=(0,ve.default)((0,ve.default)({},Lt.commonLocale),{},{locale:"zh_CN",today:"ä»Šå¤©",now:"æ­¤åˆ»",backToToday:"è¿”å›ä»Šå¤©",ok:"ç¡®å®š",timeSelect:"é€‰æ‹©æ—¶é—´",dateSelect:"é€‰æ‹©æ—¥æœŸ",weekSelect:"é€‰æ‹©å‘¨",clear:"æ¸…é™¤",week:"å‘¨",month:"æœˆ",year:"å¹´",previousMonth:"ä¸Šä¸ªæœˆ (ç¿»é¡µä¸Šé”®)",nextMonth:"ä¸‹ä¸ªæœˆ (ç¿»é¡µä¸‹é”®)",monthSelect:"é€‰æ‹©æœˆä»½",yearSelect:"é€‰æ‹©å¹´ä»½",decadeSelect:"é€‰æ‹©å¹´ä»£",previousYear:"ä¸Šä¸€å¹´ (Controlé”®åŠ å·¦æ–¹å‘é”®)",nextYear:"ä¸‹ä¸€å¹´ (Controlé”®åŠ å³æ–¹å‘é”®)",previousDecade:"ä¸Šä¸€å¹´ä»£",nextDecade:"ä¸‹ä¸€å¹´ä»£",previousCentury:"ä¸Šä¸€ä¸–çºª",nextCentury:"ä¸‹ä¸€ä¸–çºª",yearFormat:"YYYYå¹´",cellDateFormat:"D",monthBeforeYear:!1});oe.default=kt;var W={};Object.defineProperty(W,"__esModule",{value:!0});W.default=void 0;const Mt={placeholder:"è¯·é€‰æ‹©æ—¶é—´",rangePlaceholder:["å¼€å§‹æ—¶é—´","ç»“æŸæ—¶é—´"]};W.default=Mt;var Xe=se.default;Object.defineProperty(V,"__esModule",{value:!0});V.default=void 0;var Nt=Xe(oe),Ot=Xe(W);const Be={lang:Object.assign({placeholder:"è¯·é€‰æ‹©æ—¥æœŸ",yearPlaceholder:"è¯·é€‰æ‹©å¹´ä»½",quarterPlaceholder:"è¯·é€‰æ‹©å­£åº¦",monthPlaceholder:"è¯·é€‰æ‹©æœˆä»½",weekPlaceholder:"è¯·é€‰æ‹©å‘¨",rangePlaceholder:["å¼€å§‹æ—¥æœŸ","ç»“æŸæ—¥æœŸ"],rangeYearPlaceholder:["å¼€å§‹å¹´ä»½","ç»“æŸå¹´ä»½"],rangeMonthPlaceholder:["å¼€å§‹æœˆä»½","ç»“æŸæœˆä»½"],rangeQuarterPlaceholder:["å¼€å§‹å­£åº¦","ç»“æŸå­£åº¦"],rangeWeekPlaceholder:["å¼€å§‹å‘¨","ç»“æŸå‘¨"]},Nt.default),timePickerLocale:Object.assign({},Ot.default)};Be.lang.ok="ç¡®å®š";V.default=Be;var Dt=se.default;Object.defineProperty(ae,"__esModule",{value:!0});ae.default=void 0;var $t=Dt(V);ae.default=$t.default;var le=se.default;Object.defineProperty(re,"__esModule",{value:!0});re.default=void 0;var zt=le(ne),Gt=le(ae),Yt=le(V),Ht=le(W);const R="${label}ä¸æ˜¯ä¸€ä¸ªæœ‰æ•ˆçš„${type}",Ut={locale:"zh-cn",Pagination:zt.default,DatePicker:Yt.default,TimePicker:Ht.default,Calendar:Gt.default,global:{placeholder:"è¯·é€‰æ‹©",close:"å…³é—­"},Table:{filterTitle:"ç­›é€‰",filterConfirm:"ç¡®å®š",filterReset:"é‡ç½®",filterEmptyText:"æ— ç­›é€‰é¡¹",filterCheckAll:"å…¨é€‰",filterSearchPlaceholder:"åœ¨ç­›é€‰é¡¹ä¸­æœç´¢",emptyText:"æš‚æ— æ•°æ®",selectAll:"å…¨é€‰å½“é¡µ",selectInvert:"åé€‰å½“é¡µ",selectNone:"æ¸…ç©ºæ‰€æœ‰",selectionAll:"å…¨é€‰æ‰€æœ‰",sortTitle:"æ’åº",expand:"å±•å¼€è¡Œ",collapse:"å…³é—­è¡Œ",triggerDesc:"ç‚¹å‡»é™åº",triggerAsc:"ç‚¹å‡»å‡åº",cancelSort:"å–æ¶ˆæ’åº"},Modal:{okText:"ç¡®å®š",cancelText:"å–æ¶ˆ",justOkText:"çŸ¥é“äº†"},Tour:{Next:"ä¸‹ä¸€æ­¥",Previous:"ä¸Šä¸€æ­¥",Finish:"ç»“æŸå¯¼è§ˆ"},Popconfirm:{cancelText:"å–æ¶ˆ",okText:"ç¡®å®š"},Transfer:{titles:["",""],searchPlaceholder:"è¯·è¾“å…¥æœç´¢å†…å®¹",itemUnit:"é¡¹",itemsUnit:"é¡¹",remove:"åˆ é™¤",selectCurrent:"å…¨é€‰å½“é¡µ",removeCurrent:"åˆ é™¤å½“é¡µ",selectAll:"å…¨é€‰æ‰€æœ‰",deselectAll:"å–æ¶ˆå…¨é€‰",removeAll:"åˆ é™¤å…¨éƒ¨",selectInvert:"åé€‰å½“é¡µ"},Upload:{uploading:"æ–‡ä»¶ä¸Šä¼ ä¸­",removeFile:"åˆ é™¤æ–‡ä»¶",uploadError:"ä¸Šä¼ é”™è¯¯",previewFile:"é¢„è§ˆæ–‡ä»¶",downloadFile:"ä¸‹è½½æ–‡ä»¶"},Empty:{description:"æš‚æ— æ•°æ®"},Icon:{icon:"å›¾æ ‡"},Text:{edit:"ç¼–è¾‘",copy:"å¤åˆ¶",copied:"å¤åˆ¶æˆåŠŸ",expand:"å±•å¼€",collapse:"æ”¶èµ·"},Form:{optional:"ï¼ˆå¯é€‰ï¼‰",defaultValidateMessages:{default:"å­—æ®µéªŒè¯é”™è¯¯${label}",required:"è¯·è¾“å…¥${label}",enum:"${label}å¿…é¡»æ˜¯å…¶ä¸­ä¸€ä¸ª[${enum}]",whitespace:"${label}ä¸èƒ½ä¸ºç©ºå­—ç¬¦",date:{format:"${label}æ—¥æœŸæ ¼å¼æ— æ•ˆ",parse:"${label}ä¸èƒ½è½¬æ¢ä¸ºæ—¥æœŸ",invalid:"${label}æ˜¯ä¸€ä¸ªæ— æ•ˆæ—¥æœŸ"},types:{string:R,method:R,array:R,object:R,number:R,date:R,boolean:R,integer:R,float:R,regexp:R,email:R,url:R,hex:R},string:{len:"${label}é¡»ä¸º${len}ä¸ªå­—ç¬¦",min:"${label}æœ€å°‘${min}ä¸ªå­—ç¬¦",max:"${label}æœ€å¤š${max}ä¸ªå­—ç¬¦",range:"${label}é¡»åœ¨${min}-${max}å­—ç¬¦ä¹‹é—´"},number:{len:"${label}å¿…é¡»ç­‰äº${len}",min:"${label}æœ€å°å€¼ä¸º${min}",max:"${label}æœ€å¤§å€¼ä¸º${max}",range:"${label}é¡»åœ¨${min}-${max}ä¹‹é—´"},array:{len:"é¡»ä¸º${len}ä¸ª${label}",min:"æœ€å°‘${min}ä¸ª${label}",max:"æœ€å¤š${max}ä¸ª${label}",range:"${label}æ•°é‡é¡»åœ¨${min}-${max}ä¹‹é—´"},pattern:{mismatch:"${label}ä¸æ¨¡å¼ä¸åŒ¹é…${pattern}"}}},Image:{preview:"é¢„è§ˆ"},QRCode:{expired:"äºŒç»´ç è¿‡æœŸ",refresh:"ç‚¹å‡»åˆ·æ–°",scanned:"å·²æ‰«æ"},ColorPicker:{presetEmpty:"æš‚æ— ",transparent:"æ— è‰²",singleColor:"å•è‰²",gradientColor:"æ¸å˜è‰²"}};re.default=Ut;var Ft=re;const Xt=tt(Ft);var Bt={exports:{}};(function(r,s){(function(o,a){r.exports=a(it())})(rt,function(o){function a(c){return c&&typeof c=="object"&&"default"in c?c:{default:c}}var n=a(o),i={name:"zh-cn",weekdays:"æ˜ŸæœŸæ—¥_æ˜ŸæœŸä¸€_æ˜ŸæœŸäºŒ_æ˜ŸæœŸä¸‰_æ˜ŸæœŸå››_æ˜ŸæœŸäº”_æ˜ŸæœŸå…­".split("_"),weekdaysShort:"å‘¨æ—¥_å‘¨ä¸€_å‘¨äºŒ_å‘¨ä¸‰_å‘¨å››_å‘¨äº”_å‘¨å…­".split("_"),weekdaysMin:"æ—¥_ä¸€_äºŒ_ä¸‰_å››_äº”_å…­".split("_"),months:"ä¸€æœˆ_äºŒæœˆ_ä¸‰æœˆ_å››æœˆ_äº”æœˆ_å…­æœˆ_ä¸ƒæœˆ_å…«æœˆ_ä¹æœˆ_åæœˆ_åä¸€æœˆ_åäºŒæœˆ".split("_"),monthsShort:"1æœˆ_2æœˆ_3æœˆ_4æœˆ_5æœˆ_6æœˆ_7æœˆ_8æœˆ_9æœˆ_10æœˆ_11æœˆ_12æœˆ".split("_"),ordinal:function(c,u){return u==="W"?c+"å‘¨":c+"æ—¥"},weekStart:1,yearStart:4,formats:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY/MM/DD",LL:"YYYYå¹´MæœˆDæ—¥",LLL:"YYYYå¹´MæœˆDæ—¥Ahç‚¹mmåˆ†",LLLL:"YYYYå¹´MæœˆDæ—¥ddddAhç‚¹mmåˆ†",l:"YYYY/M/D",ll:"YYYYå¹´MæœˆDæ—¥",lll:"YYYYå¹´MæœˆDæ—¥ HH:mm",llll:"YYYYå¹´MæœˆDæ—¥dddd HH:mm"},relativeTime:{future:"%så†…",past:"%så‰",s:"å‡ ç§’",m:"1 åˆ†é’Ÿ",mm:"%d åˆ†é’Ÿ",h:"1 å°æ—¶",hh:"%d å°æ—¶",d:"1 å¤©",dd:"%d å¤©",M:"1 ä¸ªæœˆ",MM:"%d ä¸ªæœˆ",y:"1 å¹´",yy:"%d å¹´"},meridiem:function(c,u){var T=100*c+u;return T<600?"å‡Œæ™¨":T<900?"æ—©ä¸Š":T<1100?"ä¸Šåˆ":T<1300?"ä¸­åˆ":T<1800?"ä¸‹åˆ":"æ™šä¸Š"}};return n.default.locale(i,null,!0),i})})(Bt);const qe=x.createContext(void 0),ce=()=>{const r=x.useContext(qe);if(r===void 0)throw new Error("useAuth must be used within an AuthProvider");return r},qt=({children:r})=>{const[s,o]=x.useState(null),[a,n]=x.useState(!1);x.useEffect(()=>{const T=localStorage.getItem("auth_user"),m=localStorage.getItem("auth_token");if(T&&m)try{const l=JSON.parse(T);o(l),n(!0)}catch(l){console.error("Failed to parse saved user data:",l),localStorage.removeItem("auth_user"),localStorage.removeItem("auth_token")}},[]);const u={user:s,isAuthenticated:a,login:async(T,m)=>{if(await new Promise(l=>setTimeout(l,1e3)),T==="Admin"&&m==="5173rongcloud"){const l={id:"1",username:"Admin"},t="mock_jwt_token_"+Date.now();return localStorage.setItem("auth_user",JSON.stringify(l)),localStorage.setItem("auth_token",t),o(l),n(!0),!0}return!1},logout:()=>{localStorage.removeItem("auth_user"),localStorage.removeItem("auth_token"),o(null),n(!1)}};return e.jsx(qe.Provider,{value:u,children:r})},{Title:Vt,Text:Wt}=U,Kt=()=>{const[r]=_.useForm(),[s,o]=x.useState(!1),a=H(),{login:n}=ce(),i=async c=>{o(!0);try{await n(c.username,c.password)?(I.success("ç™»å½•æˆåŠŸï¼"),a("/characters")):I.error("ç”¨æˆ·åæˆ–å¯†ç é”™è¯¯")}catch(u){console.error("Login error:",u),I.error("ç™»å½•å¤±è´¥ï¼Œè¯·ç¨åé‡è¯•")}finally{o(!1)}};return e.jsx("div",{style:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",padding:"20px"},children:e.jsxs(P,{style:{width:"100%",maxWidth:400,boxShadow:"0 8px 32px rgba(0, 0, 0, 0.1)",borderRadius:"12px"},children:[e.jsxs("div",{style:{textAlign:"center",marginBottom:32},children:[e.jsx(Vt,{level:2,style:{color:"#1890ff",marginBottom:8},children:"AIè§’è‰²ç®¡ç†åå°"}),e.jsx(Wt,{type:"secondary",children:"H5 Demo ç®¡ç†ç³»ç»Ÿ"})]}),e.jsxs(_,{form:r,name:"login",layout:"vertical",onFinish:i,autoComplete:"off",size:"large",children:[e.jsx(_.Item,{name:"username",label:"ç”¨æˆ·å",rules:[{required:!0,message:"è¯·è¾“å…¥ç”¨æˆ·å"},{min:2,message:"ç”¨æˆ·åè‡³å°‘2ä¸ªå­—ç¬¦"}],children:e.jsx(k,{prefix:e.jsx(pe,{}),placeholder:"è¯·è¾“å…¥ç”¨æˆ·å"})}),e.jsx(_.Item,{name:"password",label:"å¯†ç ",rules:[{required:!0,message:"è¯·è¾“å…¥å¯†ç "},{min:6,message:"å¯†ç è‡³å°‘6ä¸ªå­—ç¬¦"}],children:e.jsx(k.Password,{prefix:e.jsx(lt,{}),placeholder:"è¯·è¾“å…¥å¯†ç "})}),e.jsx(_.Item,{children:e.jsx(S,{type:"primary",htmlType:"submit",loading:s,block:!0,style:{height:48,fontSize:16,borderRadius:8},children:s?"ç™»å½•ä¸­...":"ç™»å½•"})})]}),e.jsxs("div",{style:{marginTop:24,padding:16,background:"#f8f9fa",borderRadius:8,fontSize:12,color:"#666"},children:[e.jsx("div",{style:{marginBottom:8,fontWeight:"bold"},children:"Demo æµ‹è¯•è´¦å·ï¼š"}),e.jsx("div",{children:"ç”¨æˆ·åï¼šAdmin"}),e.jsx("div",{children:"å¯†ç ï¼š5173rongcloud"})]})]})})},Qt=[{key:"zh",label:"ä¸­æ–‡",flag:"ğŸ‡¨ğŸ‡³"},{key:"en",label:"English",flag:"ğŸ‡ºğŸ‡¸"},{key:"ar",label:"Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©",flag:"ğŸ‡¸ğŸ‡¦"}],Ve=[{value:"male",label:"ç”·æ€§"},{value:"female",label:"å¥³æ€§"},{value:"other",label:"å…¶ä»–"}],We=[{value:"public",label:"å…¬å¼€"},{value:"private",label:"ç§æœ‰"}],Ke=[{value:"welcome",label:"æ¬¢è¿æ¶ˆæ¯"},{value:"support",label:"æŠ€æœ¯æ”¯æŒ"},{value:"product",label:"äº§å“ä»‹ç»"},{value:"faq",label:"å¸¸è§é—®é¢˜"},{value:"other",label:"å…¶ä»–"}],Qe={DEFAULT_PAGE_SIZE:10,PAGE_SIZE_OPTIONS:["10","20","50","100"],SHOW_SIZE_CHANGER:!0,SHOW_QUICK_JUMPER:!0},q={MAX_FILE_SIZE:5*1024*1024,ACCEPTED_IMAGE_TYPES:["image/jpeg","image/jpg","image/png","image/gif","image/webp"],MAX_DISPLAY_IMAGES:6},g={REQUIRED:{required:!0,message:"æ­¤é¡¹ä¸ºå¿…å¡«é¡¹"},PHONE:{pattern:/^1[3-9]\d{9}$/,message:"è¯·è¾“å…¥æ­£ç¡®çš„æ‰‹æœºå·ç æ ¼å¼"},AGE:{type:"number",min:1,max:150,message:"å¹´é¾„å¿…é¡»åœ¨1-150ä¹‹é—´"},MAX_LENGTH:{NICKNAME:50,REGION:50,PROFESSION:50,INTRODUCTION:500,TAG:20,GREETING:200,SYSTEM_PROMPT:2e3,TEMPLATE_NAME:100,TEMPLATE_DESCRIPTION:200,TEMPLATE_CONTENT:5e3}},z={CHARACTER:{AGE:25,GENDER:"female",PERMISSION:"public",AVATAR:"https://images.unsplash.com/photo-1494790108755-2616b612b742?w=150&h=150&fit=crop&crop=face"},TEMPLATE:{CATEGORY:"other",IS_ACTIVE:!0}},Jt=[{key:"characters",label:"AIè§’è‰²ç®¡ç†",icon:"UserOutlined",path:"/characters"},{key:"templates",label:"æ¨¡æ¿ç®¡ç†",icon:"FileTextOutlined",path:"/templates"},{key:"config",label:"é€šç”¨é…ç½®",icon:"SettingOutlined",path:"/config"}],{Header:Zt,Sider:er,Content:tr}=me,rr=({children:r})=>{const[s,o]=x.useState(!1),a=H(),n=st(),{user:i,logout:c}=ce(),u=()=>{const p=n.hash||window.location.hash,f=n.pathname,A=p?p.replace("#",""):f;return A.includes("/characters")?"characters":A.includes("/templates")?"templates":A.includes("/config")?"config":"characters"},T=({key:p})=>{const f=Jt.find(A=>A.key===p);f&&a(f.path)},m=()=>{c(),a("/login")},l=[{key:"logout",icon:e.jsx(xt,{}),label:"é€€å‡ºç™»å½•",onClick:m}],t=[{key:"characters",icon:e.jsx(pe,{}),label:"AIè§’è‰²ç®¡ç†"},{key:"templates",icon:e.jsx(mt,{}),label:"æ¨¡æ¿ç®¡ç†"},{key:"config",icon:e.jsx(ht,{}),label:"é€šç”¨é…ç½®"}];return e.jsxs(me,{style:{minHeight:"100vh"},children:[e.jsxs(er,{trigger:null,collapsible:!0,collapsed:s,theme:"dark",children:[e.jsx("div",{style:{height:64,display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontSize:"18px",fontWeight:"bold",borderBottom:"1px solid #404040"},children:s?"AI":"AIè§’è‰²ç®¡ç†åå°"}),e.jsx(ct,{theme:"dark",mode:"inline",selectedKeys:[u()],items:t,onClick:T,style:{borderRight:0}})]}),e.jsxs(me,{children:[e.jsxs(Zt,{style:{padding:"0 24px",background:"#fff",display:"flex",alignItems:"center",justifyContent:"space-between",borderBottom:"1px solid #f0f0f0"},children:[e.jsx("div",{style:{display:"flex",alignItems:"center"},children:e.jsx(S,{type:"text",icon:s?e.jsx(dt,{}):e.jsx(ut,{}),onClick:()=>o(!s),style:{fontSize:"16px",width:64,height:64}})}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[e.jsxs("span",{children:["æ¬¢è¿ï¼Œ",i==null?void 0:i.username]}),e.jsx(pt,{menu:{items:l},placement:"bottomRight",arrow:!0,children:e.jsx(Se,{style:{backgroundColor:"#1890ff",cursor:"pointer"},icon:e.jsx(pe,{})})})]})]}),e.jsx(tr,{style:{margin:"24px",padding:"24px",background:"#fff",borderRadius:"8px",boxShadow:"0 1px 3px rgba(0, 0, 0, 0.1)"},children:r})]})]})},sr="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict";let L=(r=21)=>{let s="",o=crypto.getRandomValues(new Uint8Array(r|=0));for(;r--;)s+=sr[o[r]&63];return s};const E=(r,s,o)=>({zh:r,en:s,ar:o}),nr=()=>[{id:L(),botId:`bot_${L()}`,avatar:"https://images.unsplash.com/photo-1494790108755-2616b612b742?w=150&h=150&fit=crop&crop=face",gender:"female",age:25,permission:"public",nickname:E("å°é›…åŠ©æ‰‹","Xiaoya Assistant","Ù…Ø³Ø§Ø¹Ø¯ Ø´ÙŠØ§ÙˆÙŠØ§"),region:E("åŒ—äº¬","Beijing","Ø¨ÙƒÙŠÙ†"),profession:E("AIåŠ©æ‰‹","AI Assistant","Ù…Ø³Ø§Ø¹Ø¯ Ø°ÙƒÙŠ"),introduction:E("æˆ‘æ˜¯å°é›…ï¼Œä¸€ä¸ªå‹å–„çš„AIåŠ©æ‰‹ï¼Œå¯ä»¥å¸®åŠ©æ‚¨è§£ç­”é—®é¢˜å’Œæä¾›å»ºè®®ã€‚","I am Xiaoya, a friendly AI assistant who can help answer questions and provide advice.","Ø£Ù†Ø§ Ø´ÙŠØ§ÙˆÙŠØ§ØŒ Ù…Ø³Ø§Ø¹Ø¯ Ø°ÙƒÙŠ ÙˆØ¯ÙˆØ¯ ÙŠÙ…ÙƒÙ†Ù†ÙŠ Ù…Ø³Ø§Ø¹Ø¯ØªÙƒ ÙÙŠ Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© Ø¹Ù„Ù‰ Ø§Ù„Ø£Ø³Ø¦Ù„Ø© ÙˆØªÙ‚Ø¯ÙŠÙ… Ø§Ù„Ù†ØµØ§Ø¦Ø­."),tags:{zh:["å‹å–„","ä¸“ä¸š","é«˜æ•ˆ"],en:["Friendly","Professional","Efficient"],ar:["ÙˆØ¯ÙˆØ¯","Ù…Ø­ØªØ±Ù","ÙØ¹Ø§Ù„"]},greeting:E("ä½ å¥½ï¼æˆ‘æ˜¯å°é›…ï¼Œå¾ˆé«˜å…´ä¸ºæ‚¨æœåŠ¡ï¼æœ‰ä»€ä¹ˆå¯ä»¥å¸®åŠ©æ‚¨çš„å—ï¼Ÿ","Hello! I am Xiaoya, nice to serve you! How can I help you?","Ù…Ø±Ø­Ø¨Ø§! Ø£Ù†Ø§ Ø´ÙŠØ§ÙˆÙŠØ§ØŒ Ù…Ù† Ø¯ÙˆØ§Ø¹ÙŠ Ø³Ø±ÙˆØ±ÙŠ Ø®Ø¯Ù…ØªÙƒ! ÙƒÙŠÙ ÙŠÙ…ÙƒÙ†Ù†ÙŠ Ù…Ø³Ø§Ø¹Ø¯ØªÙƒØŸ"),displayImages:["https://images.unsplash.com/photo-1494790108755-2616b612b742?w=300&h=400&fit=crop","https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=300&h=400&fit=crop"],systemPrompt:"You are Xiaoya, a helpful and friendly AI assistant. Always be polite, professional, and try your best to help users with their questions.",whitelist:["13800138000","13900139000"],createdAt:new Date("2024-01-15").toISOString(),updatedAt:new Date("2024-01-20").toISOString()},{id:L(),botId:`bot_${L()}`,avatar:"https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=150&h=150&fit=crop&crop=face",gender:"male",age:30,permission:"private",nickname:E("æŠ€æœ¯ä¸“å®¶Tom","Tech Expert Tom","Ø®Ø¨ÙŠØ± Ø§Ù„ØªÙƒÙ†ÙˆÙ„ÙˆØ¬ÙŠØ§ ØªÙˆÙ…"),region:E("ä¸Šæµ·","Shanghai","Ø´Ù†ØºÙ‡Ø§ÙŠ"),profession:E("æŠ€æœ¯é¡¾é—®","Technical Consultant","Ù…Ø³ØªØ´Ø§Ø± ØªÙ‚Ù†ÙŠ"),introduction:E("æˆ‘æ˜¯Tomï¼Œä¸“æ³¨äºæŠ€æœ¯é¢†åŸŸçš„AIåŠ©æ‰‹ï¼Œæ“…é•¿ç¼–ç¨‹ã€æ¶æ„è®¾è®¡å’ŒæŠ€æœ¯å’¨è¯¢ã€‚","I am Tom, an AI assistant focused on technology, specializing in programming, architecture design, and technical consulting.","Ø£Ù†Ø§ ØªÙˆÙ…ØŒ Ù…Ø³Ø§Ø¹Ø¯ Ø°ÙƒÙŠ ÙŠØ±ÙƒØ² Ø¹Ù„Ù‰ Ø§Ù„ØªÙƒÙ†ÙˆÙ„ÙˆØ¬ÙŠØ§ØŒ Ù…ØªØ®ØµØµ ÙÙŠ Ø§Ù„Ø¨Ø±Ù…Ø¬Ø© ÙˆØªØµÙ…ÙŠÙ… Ø§Ù„Ø¨Ù†ÙŠØ© Ø§Ù„ØªØ­ØªÙŠØ© ÙˆØ§Ù„Ø§Ø³ØªØ´Ø§Ø±Ø§Øª Ø§Ù„ØªÙ‚Ù†ÙŠØ©."),tags:{zh:["æŠ€æœ¯","ç¼–ç¨‹","æ¶æ„","ä¸“ä¸š"],en:["Technology","Programming","Architecture","Professional"],ar:["ØªÙƒÙ†ÙˆÙ„ÙˆØ¬ÙŠØ§","Ø¨Ø±Ù…Ø¬Ø©","Ù‡Ù†Ø¯Ø³Ø© Ù…Ø¹Ù…Ø§Ø±ÙŠØ©","Ù…Ø­ØªØ±Ù"]},greeting:E("æ‚¨å¥½ï¼æˆ‘æ˜¯Tomï¼Œæ‚¨çš„æŠ€æœ¯é¡¾é—®ã€‚æœ‰ä»€ä¹ˆæŠ€æœ¯é—®é¢˜éœ€è¦æ¢è®¨å—ï¼Ÿ","Hello! I am Tom, your technical consultant. Any technical questions to discuss?","Ù…Ø±Ø­Ø¨Ø§! Ø£Ù†Ø§ ØªÙˆÙ…ØŒ Ù…Ø³ØªØ´Ø§Ø±Ùƒ Ø§Ù„ØªÙ‚Ù†ÙŠ. Ù‡Ù„ Ù„Ø¯ÙŠÙƒ Ø£ÙŠ Ø£Ø³Ø¦Ù„Ø© ØªÙ‚Ù†ÙŠØ© Ù„Ù„Ù…Ù†Ø§Ù‚Ø´Ø©ØŸ"),displayImages:["https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=300&h=400&fit=crop","https://images.unsplash.com/photo-1560250097-0b93528c311a?w=300&h=400&fit=crop"],systemPrompt:"You are Tom, a technical expert AI assistant. You specialize in programming, software architecture, and providing technical solutions. Be precise, helpful, and professional.",whitelist:["13700137000","13600136000","13500135000"],createdAt:new Date("2024-01-10").toISOString(),updatedAt:new Date("2024-01-18").toISOString()},{id:L(),botId:`bot_${L()}`,avatar:"https://images.unsplash.com/photo-1438761681033-6461ffad8d80?w=150&h=150&fit=crop&crop=face",gender:"female",age:28,permission:"public",nickname:E("åˆ›æ„è®¾è®¡å¸ˆLily","Creative Designer Lily","Ø§Ù„Ù…ØµÙ…Ù…Ø© Ø§Ù„Ø¥Ø¨Ø¯Ø§Ø¹ÙŠØ© Ù„ÙŠÙ„ÙŠ"),region:E("æ·±åœ³","Shenzhen","Ø´Ù†ØªØ´Ù†"),profession:E("UI/UXè®¾è®¡å¸ˆ","UI/UX Designer","Ù…ØµÙ…Ù… ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…"),introduction:E("æˆ‘æ˜¯Lilyï¼Œä¸“ä¸šçš„UI/UXè®¾è®¡å¸ˆï¼Œçƒ­çˆ±åˆ›æ„è®¾è®¡ï¼Œå¯ä»¥ä¸ºæ‚¨æä¾›è®¾è®¡å»ºè®®å’Œåˆ›æ„çµæ„Ÿã€‚","I am Lily, a professional UI/UX designer who loves creative design and can provide design advice and creative inspiration.","Ø£Ù†Ø§ Ù„ÙŠÙ„ÙŠØŒ Ù…ØµÙ…Ù…Ø© ÙˆØ§Ø¬Ù‡Ø© Ù…Ø³ØªØ®Ø¯Ù… Ù…Ø­ØªØ±ÙØ© Ø£Ø­Ø¨ Ø§Ù„ØªØµÙ…ÙŠÙ… Ø§Ù„Ø¥Ø¨Ø¯Ø§Ø¹ÙŠ ÙˆÙŠÙ…ÙƒÙ†Ù†ÙŠ ØªÙ‚Ø¯ÙŠÙ… Ù†ØµØ§Ø¦Ø­ Ø§Ù„ØªØµÙ…ÙŠÙ… ÙˆØ§Ù„Ø¥Ù„Ù‡Ø§Ù… Ø§Ù„Ø¥Ø¨Ø¯Ø§Ø¹ÙŠ."),tags:{zh:["åˆ›æ„","è®¾è®¡","ç¾å­¦","ç”¨æˆ·ä½“éªŒ"],en:["Creative","Design","Aesthetic","User Experience"],ar:["Ø¥Ø¨Ø¯Ø§Ø¹ÙŠ","ØªØµÙ…ÙŠÙ…","Ø¬Ù…Ø§Ù„ÙŠ","ØªØ¬Ø±Ø¨Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…"]},greeting:E("å—¨ï¼æˆ‘æ˜¯Lilyï¼Œè®©æˆ‘ä»¬ä¸€èµ·åˆ›é€ ç¾å¥½çš„è®¾è®¡å§ï¼æœ‰ä»€ä¹ˆè®¾è®¡éœ€æ±‚å—ï¼Ÿ","Hi! I am Lily, let's create beautiful designs together! Any design needs?","Ù…Ø±Ø­Ø¨Ø§! Ø£Ù†Ø§ Ù„ÙŠÙ„ÙŠØŒ Ø¯Ø¹ÙˆÙ†Ø§ Ù†Ù†Ø´Ø¦ ØªØµØ§Ù…ÙŠÙ… Ø¬Ù…ÙŠÙ„Ø© Ù…Ø¹Ø§! Ù‡Ù„ Ù„Ø¯ÙŠÙƒ Ø£ÙŠ Ø§Ø­ØªÙŠØ§Ø¬Ø§Øª ØªØµÙ…ÙŠÙ…ÙŠØ©ØŸ"),displayImages:["https://images.unsplash.com/photo-1438761681033-6461ffad8d80?w=300&h=400&fit=crop","https://images.unsplash.com/photo-1534528741775-53994a69daeb?w=300&h=400&fit=crop"],systemPrompt:"You are Lily, a creative UI/UX designer AI assistant. You are passionate about design, aesthetics, and user experience. Provide creative and practical design advice.",whitelist:[],createdAt:new Date("2024-01-12").toISOString(),updatedAt:new Date("2024-01-22").toISOString()}],ar=()=>[{id:L(),name:E("æ¬¢è¿æ¶ˆæ¯æ¨¡æ¿","Welcome Message Template","Ù‚Ø§Ù„Ø¨ Ø±Ø³Ø§Ù„Ø© Ø§Ù„ØªØ±Ø­ÙŠØ¨"),description:E("ç”¨äºæ–°ç”¨æˆ·çš„æ¬¢è¿æ¶ˆæ¯æ¨¡æ¿","Welcome message template for new users","Ù‚Ø§Ù„Ø¨ Ø±Ø³Ø§Ù„Ø© ØªØ±Ø­ÙŠØ¨ Ù„Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† Ø§Ù„Ø¬Ø¯Ø¯"),content:E("æ¬¢è¿æ¥åˆ°æˆ‘ä»¬çš„å¹³å°ï¼æˆ‘ä»¬å¾ˆé«˜å…´æ‚¨çš„åŠ å…¥ã€‚å¦‚æœæ‚¨æœ‰ä»»ä½•é—®é¢˜ï¼Œè¯·éšæ—¶è”ç³»æˆ‘ä»¬ã€‚","Welcome to our platform! We are glad to have you join us. If you have any questions, please feel free to contact us.","Ù…Ø±Ø­Ø¨Ø§ Ø¨Ùƒ ÙÙŠ Ù…Ù†ØµØªÙ†Ø§! Ù†Ø­Ù† Ø³Ø¹Ø¯Ø§Ø¡ Ù„Ø§Ù†Ø¶Ù…Ø§Ù…Ùƒ Ø¥Ù„ÙŠÙ†Ø§. Ø¥Ø°Ø§ ÙƒØ§Ù† Ù„Ø¯ÙŠÙƒ Ø£ÙŠ Ø£Ø³Ø¦Ù„Ø©ØŒ Ù„Ø§ ØªØªØ±Ø¯Ø¯ ÙÙŠ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ù†Ø§."),category:"welcome",isActive:!0,createdAt:new Date("2024-01-08").toISOString(),updatedAt:new Date("2024-01-15").toISOString()},{id:L(),name:E("æŠ€æœ¯æ”¯æŒæ¨¡æ¿","Technical Support Template","Ù‚Ø§Ù„Ø¨ Ø§Ù„Ø¯Ø¹Ù… Ø§Ù„ØªÙ‚Ù†ÙŠ"),description:E("æŠ€æœ¯æ”¯æŒç›¸å…³çš„å›å¤æ¨¡æ¿","Reply template for technical support","Ù‚Ø§Ù„Ø¨ Ø§Ù„Ø±Ø¯ Ù„Ù„Ø¯Ø¹Ù… Ø§Ù„ØªÙ‚Ù†ÙŠ"),content:E("æ„Ÿè°¢æ‚¨çš„åé¦ˆã€‚æˆ‘ä»¬çš„æŠ€æœ¯å›¢é˜Ÿæ­£åœ¨å¤„ç†æ‚¨çš„é—®é¢˜ï¼Œé¢„è®¡åœ¨24å°æ—¶å†…ç»™æ‚¨å›å¤ã€‚","Thank you for your feedback. Our technical team is working on your issue and we expect to reply within 24 hours.","Ø´ÙƒØ±Ø§ Ù„Ùƒ Ø¹Ù„Ù‰ Ù…Ù„Ø§Ø­Ø¸Ø§ØªÙƒ. ÙØ±ÙŠÙ‚Ù†Ø§ Ø§Ù„ØªÙ‚Ù†ÙŠ ÙŠØ¹Ù…Ù„ Ø¹Ù„Ù‰ Ù…Ø´ÙƒÙ„ØªÙƒ ÙˆÙ†ØªÙˆÙ‚Ø¹ Ø§Ù„Ø±Ø¯ Ø®Ù„Ø§Ù„ 24 Ø³Ø§Ø¹Ø©."),category:"support",isActive:!0,createdAt:new Date("2024-01-10").toISOString(),updatedAt:new Date("2024-01-12").toISOString()},{id:L(),name:E("äº§å“ä»‹ç»æ¨¡æ¿","Product Introduction Template","Ù‚Ø§Ù„Ø¨ ØªÙ‚Ø¯ÙŠÙ… Ø§Ù„Ù…Ù†ØªØ¬"),description:E("ç”¨äºä»‹ç»äº§å“åŠŸèƒ½çš„æ¨¡æ¿","Template for introducing product features","Ù‚Ø§Ù„Ø¨ Ù„ØªÙ‚Ø¯ÙŠÙ… Ù…ÙŠØ²Ø§Øª Ø§Ù„Ù…Ù†ØªØ¬"),content:E("æˆ‘ä»¬çš„äº§å“å…·æœ‰ä»¥ä¸‹ç‰¹ç‚¹ï¼š1. æ™ºèƒ½åŒ–æ“ä½œ 2. é«˜æ•ˆæ€§èƒ½ 3. ç”¨æˆ·å‹å¥½ç•Œé¢ 4. å®‰å…¨å¯é ","Our product has the following features: 1. Intelligent operation 2. High efficiency 3. User-friendly interface 4. Safe and reliable","Ù…Ù†ØªØ¬Ù†Ø§ Ù„Ù‡ Ø§Ù„Ù…ÙŠØ²Ø§Øª Ø§Ù„ØªØ§Ù„ÙŠØ©: 1. ØªØ´ØºÙŠÙ„ Ø°ÙƒÙŠ 2. ÙƒÙØ§Ø¡Ø© Ø¹Ø§Ù„ÙŠØ© 3. ÙˆØ§Ø¬Ù‡Ø© Ø³Ù‡Ù„Ø© Ø§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù… 4. Ø¢Ù…Ù† ÙˆÙ…ÙˆØ«ÙˆÙ‚"),category:"product",isActive:!1,createdAt:new Date("2024-01-05").toISOString(),updatedAt:new Date("2024-01-20").toISOString()}],or=()=>({defaultAvatars:["https://images.unsplash.com/photo-1494790108755-2616b612b742?w=150&h=150&fit=crop&crop=face","https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=150&h=150&fit=crop&crop=face","https://images.unsplash.com/photo-1438761681033-6461ffad8d80?w=150&h=150&fit=crop&crop=face","https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=150&h=150&fit=crop&crop=face","https://images.unsplash.com/photo-1534528741775-53994a69daeb?w=150&h=150&fit=crop&crop=face","https://images.unsplash.com/photo-1560250097-0b93528c311a?w=150&h=150&fit=crop&crop=face"]}),Je=x.createContext(void 0),F=()=>{const r=x.useContext(Je);if(r===void 0)throw new Error("useData must be used within a DataProvider");return r},ir=({children:r})=>{const[s,o]=x.useState(()=>{const d=localStorage.getItem("demo_characters");return d?JSON.parse(d):nr()}),[a,n]=x.useState(()=>{const d=localStorage.getItem("demo_templates");return d?JSON.parse(d):ar()}),[i,c]=x.useState(()=>{const d=localStorage.getItem("demo_config");return d?JSON.parse(d):or()}),u=x.useCallback((d,y)=>{localStorage.setItem(d,JSON.stringify(y))},[]),T=x.useCallback(d=>{const y={...d,id:L(),botId:`bot_${L()}`,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};o(j=>{const b=[...j,y];return u("demo_characters",b),b})},[u]),m=x.useCallback((d,y)=>{o(j=>{const b=j.map(C=>C.id===d?{...C,...y,updatedAt:new Date().toISOString()}:C);return u("demo_characters",b),b})},[u]),l=x.useCallback(d=>{o(y=>{const j=y.filter(b=>b.id!==d);return u("demo_characters",j),j})},[u]),t=x.useCallback(d=>s.find(y=>y.id===d),[s]),p=x.useCallback(d=>{const y={...d,id:L(),createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};n(j=>{const b=[...j,y];return u("demo_templates",b),b})},[u]),f=x.useCallback((d,y)=>{n(j=>{const b=j.map(C=>C.id===d?{...C,...y,updatedAt:new Date().toISOString()}:C);return u("demo_templates",b),b})},[u]),A=x.useCallback(d=>{n(y=>{const j=y.filter(b=>b.id!==d);return u("demo_templates",j),j})},[u]),h=x.useCallback(d=>a.find(y=>y.id===d),[a]),v=x.useCallback(d=>{c(y=>{const j={...y,...d};return u("demo_config",j),j})},[u]),w=x.useCallback((d,y)=>{var j;m(d,{whitelist:[...((j=s.find(b=>b.id===d))==null?void 0:j.whitelist)||[],y]})},[m,s]),M=x.useCallback((d,y)=>{const j=s.find(b=>b.id===d);j&&m(d,{whitelist:j.whitelist.filter(b=>b!==y)})},[m,s]),X={characters:s,addCharacter:T,updateCharacter:m,deleteCharacter:l,getCharacter:t,templates:a,addTemplate:p,updateTemplate:f,deleteTemplate:A,getTemplate:h,config:i,updateConfig:v,addToWhitelist:w,removeFromWhitelist:M};return e.jsx(Je.Provider,{value:X,children:r})},lr=({open:r,onCancel:s,characterId:o,characterName:a})=>{const[n,i]=x.useState(""),[c,u]=x.useState(!1),{characters:T,addToWhitelist:m,removeFromWhitelist:l}=F(),t=T.find(v=>v.id===o),p=(t==null?void 0:t.whitelist)||[],f=async()=>{if(!n.trim()){I.error("è¯·è¾“å…¥æ‰‹æœºå·");return}if(!g.PHONE.pattern.test(n)){I.error(g.PHONE.message);return}if(p.includes(n)){I.error("è¯¥æ‰‹æœºå·å·²å­˜åœ¨");return}u(!0);try{await new Promise(v=>setTimeout(v,500)),m(o,n),i(""),I.success("æ·»åŠ æˆåŠŸ")}catch{I.error("æ·»åŠ å¤±è´¥")}finally{u(!1)}},A=async v=>{u(!0);try{await new Promise(w=>setTimeout(w,300)),l(o,v),I.success("ç§»é™¤æˆåŠŸ")}catch{I.error("ç§»é™¤å¤±è´¥")}finally{u(!1)}},h=v=>{v.key==="Enter"&&f()};return e.jsxs(xe,{title:e.jsxs("div",{children:[e.jsx(ye,{style:{marginRight:8}}),"ç™½åå•ç®¡ç† - ",a]}),open:r,onCancel:s,width:600,footer:null,children:[e.jsx("div",{style:{marginBottom:16},children:e.jsxs(k.Group,{compact:!0,style:{display:"flex"},children:[e.jsx(k,{placeholder:"è¯·è¾“å…¥æ‰‹æœºå·ï¼ˆå¦‚ï¼š13800138000ï¼‰",value:n,onChange:v=>i(v.target.value),onKeyPress:h,style:{flex:1},maxLength:11}),e.jsx(S,{type:"primary",icon:e.jsx(G,{}),onClick:f,loading:c,children:"æ·»åŠ "})]})}),e.jsx("div",{style:{maxHeight:400,overflowY:"auto",border:"1px solid #f0f0f0",borderRadius:6,padding:8},children:p.length===0?e.jsx(ge,{description:"æš‚æ— ç™½åå•ç”¨æˆ·",image:ge.PRESENTED_IMAGE_SIMPLE,style:{padding:"40px 0"}}):e.jsx(fe,{dataSource:p,renderItem:(v,w)=>e.jsx(fe.Item,{actions:[e.jsx(Z,{title:"ç¡®è®¤ç§»é™¤",description:`ç¡®å®šè¦å°† ${v} ä»ç™½åå•ä¸­ç§»é™¤å—ï¼Ÿ`,onConfirm:()=>A(v),okText:"ç¡®è®¤",cancelText:"å–æ¶ˆ",children:e.jsx(S,{type:"text",danger:!0,icon:e.jsx(ee,{}),size:"small"})})],style:{padding:"8px 12px",backgroundColor:w%2===0?"#fafafa":"#fff",borderRadius:4,margin:"4px 0"},children:e.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[e.jsx(ye,{style:{marginRight:8,color:"#1890ff"}}),e.jsx("span",{style:{fontFamily:"monospace",fontSize:14},children:v})]})},v)})}),e.jsxs("div",{style:{marginTop:16,padding:12,backgroundColor:"#f6f8fa",borderRadius:6,fontSize:12,color:"#666"},children:[e.jsx("div",{style:{marginBottom:4},children:e.jsx("strong",{children:"è¯´æ˜ï¼š"})}),e.jsx("div",{children:"â€¢ åªæœ‰ç™½åå•ä¸­çš„æ‰‹æœºå·æ‰èƒ½è®¿é—®è¯¥ç§æœ‰AIè§’è‰²"}),e.jsx("div",{children:"â€¢ æ‰‹æœºå·æ ¼å¼ï¼šä»¥1å¼€å¤´çš„11ä½æ•°å­—"}),e.jsxs("div",{children:["â€¢ å½“å‰ç™½åå•ç”¨æˆ·æ•°é‡ï¼š",p.length]})]})]})},{Search:cr}=k,{Title:dr,Text:Te}=U,ur=()=>{const r=H(),{characters:s,deleteCharacter:o}=F(),[a,n]=x.useState(""),[i,c]=x.useState({open:!1,characterId:"",characterName:""}),u=x.useMemo(()=>a.trim()?s.filter(t=>{const p=a.toLowerCase();return t.botId.toLowerCase().includes(p)||t.nickname.zh.toLowerCase().includes(p)||t.nickname.en.toLowerCase().includes(p)||t.nickname.ar.toLowerCase().includes(p)}):s,[s,a]),T=async t=>{try{o(t.id),I.success("åˆ é™¤æˆåŠŸ")}catch{I.error("åˆ é™¤å¤±è´¥")}},m=t=>{c({open:!0,characterId:t.id,characterName:t.nickname.zh})},l=[{title:"Bot ID",dataIndex:"botId",key:"botId",width:150,render:t=>e.jsx(Te,{code:!0,style:{fontSize:12},children:t})},{title:"å¤´åƒ",dataIndex:"avatar",key:"avatar",width:80,render:t=>e.jsx(Se,{src:t,size:48})},{title:"æ˜µç§°",dataIndex:"nickname",key:"nickname",render:(t,p)=>e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:500,marginBottom:4},children:t.zh}),e.jsxs("div",{style:{fontSize:12,color:"#666"},children:[p.profession.zh," Â· ",p.region.zh]})]})},{title:"æ€§åˆ«/å¹´é¾„",key:"genderAge",width:100,render:t=>{var f;return`${(f=Ve.find(A=>A.value===t.gender))==null?void 0:f.label} / ${t.age}å²`}},{title:"æƒé™",dataIndex:"permission",key:"permission",width:100,render:t=>{const p=We.find(f=>f.value===t);return e.jsx(J,{color:t==="public"?"green":"orange",children:p==null?void 0:p.label})}},{title:"ç™½åå•ç”¨æˆ·",key:"whitelistCount",width:120,render:t=>e.jsx("div",{style:{textAlign:"center"},children:t.permission==="private"?e.jsxs(J,{color:"blue",children:[t.whitelist.length," äºº"]}):e.jsx(Te,{type:"secondary",children:"-"})})},{title:"æœ€åæ›´æ–°",dataIndex:"updatedAt",key:"updatedAt",width:140,sorter:(t,p)=>O(t.updatedAt).unix()-O(p.updatedAt).unix(),render:t=>e.jsx("div",{style:{fontSize:12},children:O(t).format("YYYY-MM-DD HH:mm")})},{title:"æ“ä½œ",key:"actions",width:200,render:t=>e.jsxs(Y,{size:"small",children:[e.jsx(S,{type:"link",size:"small",icon:e.jsx(Ce,{}),onClick:()=>r(`/characters/edit/${t.id}`),children:"æŸ¥çœ‹"}),e.jsx(S,{type:"link",size:"small",icon:e.jsx(Pe,{}),onClick:()=>r(`/characters/edit/${t.id}`),children:"ç¼–è¾‘"}),t.permission==="private"&&e.jsx(S,{type:"link",size:"small",icon:e.jsx(gt,{}),onClick:()=>m(t),children:"ç™½åå•"}),e.jsx(Z,{title:"ç¡®è®¤åˆ é™¤",description:e.jsxs("div",{children:[e.jsxs("div",{children:["ç¡®å®šè¦åˆ é™¤è§’è‰² ",e.jsx("strong",{children:t.nickname.zh})," å—ï¼Ÿ"]}),e.jsx("div",{style:{color:"#ff4d4f",fontSize:12,marginTop:4},children:"æ­¤æ“ä½œä¸å¯æ¢å¤"})]}),onConfirm:()=>T(t),okText:"ç¡®è®¤åˆ é™¤",cancelText:"å–æ¶ˆ",okButtonProps:{danger:!0},children:e.jsx(S,{type:"link",size:"small",danger:!0,icon:e.jsx(ee,{}),children:"åˆ é™¤"})})]})}];return e.jsxs("div",{children:[e.jsxs("div",{style:{marginBottom:24},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:16},children:[e.jsx(dr,{level:3,style:{margin:0},children:"AIè§’è‰²ç®¡ç†"}),e.jsx(S,{type:"primary",icon:e.jsx(G,{}),onClick:()=>r("/characters/new"),size:"large",children:"æ–°å¢AIè§’è‰²"})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("div",{style:{display:"flex",gap:16,alignItems:"center"},children:e.jsx(cr,{placeholder:"æœç´¢è§’è‰²æ˜µç§°æˆ–Bot ID",style:{width:300},onSearch:n,onChange:t=>n(t.target.value),allowClear:!0})}),e.jsxs("div",{style:{color:"#666",fontSize:14},children:["å…± ",u.length," ä¸ªè§’è‰²"]})]})]}),e.jsx(P,{children:e.jsx(we,{columns:l,dataSource:u,rowKey:"id",pagination:{...Qe,total:u.length,showTotal:(t,p)=>`ç¬¬ ${p[0]}-${p[1]} æ¡ï¼Œå…± ${t} æ¡`},scroll:{x:1200}})}),e.jsx(lr,{open:i.open,onCancel:()=>c({open:!1,characterId:"",characterName:""}),characterId:i.characterId,characterName:i.characterName})]})},Ze=({activeLanguage:r,onChange:s,className:o="language-tabs"})=>{const a=Qt.map(n=>({key:n.key,label:e.jsxs("span",{children:[n.flag," ",n.label]})}));return e.jsx(ft,{activeKey:r,onChange:n=>s(n),items:a,className:o,size:"large",type:"card"})},Ie=({value:r=[],onChange:s,maxCount:o=1,listType:a="picture-card",disabled:n=!1})=>{const[i,c]=x.useState(!1),[u,T]=x.useState(""),[m,l]=x.useState(""),t=d=>new Promise(y=>{setTimeout(()=>{const j=URL.createObjectURL(d);y(j)},1e3)}),p=d=>new Promise((y,j)=>{const b=new FileReader;b.readAsDataURL(d),b.onload=()=>y(b.result),b.onerror=C=>j(C)}),f=r.map((d,y)=>({uid:`${y}`,name:`image-${y}.jpg`,status:"done",url:d})),A=async d=>{!d.url&&!d.preview&&(d.preview=await p(d.originFileObj)),T(d.url||d.preview),c(!0),l(d.name||d.url.substring(d.url.lastIndexOf("/")+1))},h=d=>q.ACCEPTED_IMAGE_TYPES.includes(d.type)?d.size<=q.MAX_FILE_SIZE?!0:(I.error("å›¾ç‰‡å¤§å°ä¸èƒ½è¶…è¿‡ 5MBï¼"),!1):(I.error("åªèƒ½ä¸Šä¼  JPG/PNG/GIF/WebP æ ¼å¼çš„å›¾ç‰‡ï¼"),!1),v=async d=>{const{file:y,onSuccess:j,onError:b}=d;try{const C=await t(y);j({url:C},y)}catch(C){console.error("Upload failed:",C),b(C)}},w=({fileList:d})=>{const y=d.filter(j=>j.status==="done").map(j=>{var b;return((b=j.response)==null?void 0:b.url)||j.url}).filter(Boolean);s==null||s(y)},M=d=>{const y=r.filter(j=>j!==d.url);s==null||s(y)},X=e.jsxs("div",{children:[e.jsx(G,{}),e.jsx("div",{style:{marginTop:8},children:"ä¸Šä¼ å›¾ç‰‡"})]});return e.jsxs(e.Fragment,{children:[e.jsx(Re,{customRequest:v,listType:a,fileList:f,onPreview:A,onChange:w,onRemove:M,beforeUpload:h,disabled:n,multiple:o>1,children:f.length>=o?null:X}),e.jsx(xe,{open:i,title:m,footer:null,onCancel:()=>c(!1),children:e.jsx("img",{alt:"preview",style:{width:"100%"},src:u})})]})},{Title:pr}=U,{TextArea:de}=k,be=()=>{const[r]=_.useForm(),s=H(),{id:o}=Ae(),a=!!o,{addCharacter:n,updateCharacter:i,getCharacter:c}=F(),[u,T]=x.useState(!1),[m,l]=x.useState("zh"),[t,p]=x.useState(null);x.useEffect(()=>{if(a&&o){const h=c(o);h?(p(h),r.setFieldsValue({...h,nickname:h.nickname[m],region:h.region[m],profession:h.profession[m],introduction:h.introduction[m],tags:h.tags[m],greeting:h.greeting[m]})):(I.error("è§’è‰²ä¸å­˜åœ¨"),s("/characters"))}else r.setFieldsValue({avatar:z.CHARACTER.AVATAR,gender:z.CHARACTER.GENDER,age:z.CHARACTER.AGE,permission:z.CHARACTER.PERMISSION,displayImages:[],tags:[]})},[a,o,c,r,s,m]),x.useEffect(()=>{t&&r.setFieldsValue({nickname:t.nickname[m],region:t.region[m],profession:t.profession[m],introduction:t.introduction[m],tags:t.tags[m],greeting:t.greeting[m]})},[m,t,r]);const f=(h,v)=>({...v||{zh:"",en:"",ar:""},[m]:h||""}),A=async h=>{T(!0);try{const v={nickname:f(h.nickname,t==null?void 0:t.nickname),region:f(h.region,t==null?void 0:t.region),profession:f(h.profession,t==null?void 0:t.profession),introduction:f(h.introduction,t==null?void 0:t.introduction),greeting:f(h.greeting,t==null?void 0:t.greeting),tags:{...(t==null?void 0:t.tags)||{zh:[],en:[],ar:[]},[m]:h.tags||[]}},w={avatar:h.avatar,gender:h.gender,age:h.age,permission:h.permission,displayImages:h.displayImages||[],systemPrompt:h.systemPrompt||"",whitelist:(t==null?void 0:t.whitelist)||[],...v};await new Promise(M=>setTimeout(M,1e3)),a&&t?(i(t.id,w),I.success("æ›´æ–°æˆåŠŸ")):(n(w),I.success("åˆ›å»ºæˆåŠŸ")),s("/characters")}catch(v){I.error(a?"æ›´æ–°å¤±è´¥":"åˆ›å»ºå¤±è´¥"),console.error("Submit error:",v)}finally{T(!1)}};return e.jsxs("div",{children:[e.jsx("div",{style:{marginBottom:24},children:e.jsxs(Y,{children:[e.jsx(S,{icon:e.jsx(Le,{}),onClick:()=>s("/characters"),children:"è¿”å›åˆ—è¡¨"}),e.jsx(pr,{level:3,style:{margin:0},children:a?"ç¼–è¾‘AIè§’è‰²":"æ–°å¢AIè§’è‰²"}),a&&t&&e.jsxs(J,{color:"blue",children:["Bot ID: ",t.botId]})]})}),e.jsx(P,{children:e.jsxs(_,{form:r,layout:"vertical",onFinish:A,scrollToFirstError:!0,children:[e.jsxs(B,{gutter:24,children:[e.jsxs(D,{xs:24,lg:12,children:[e.jsxs(P,{title:"åŸºæœ¬ä¿¡æ¯",size:"small",style:{marginBottom:24},children:[e.jsx(_.Item,{name:"avatar",label:"å¤´åƒ",rules:[g.REQUIRED],children:e.jsx(Ie,{maxCount:1})}),e.jsxs(B,{gutter:16,children:[e.jsx(D,{span:12,children:e.jsx(_.Item,{name:"gender",label:"æ€§åˆ«",rules:[g.REQUIRED],children:e.jsx(K,{options:Ve})})}),e.jsx(D,{span:12,children:e.jsx(_.Item,{name:"age",label:"å¹´é¾„",rules:[g.REQUIRED,g.AGE],children:e.jsx(yt,{min:1,max:150,style:{width:"100%"}})})})]}),e.jsx(_.Item,{name:"permission",label:"æƒé™è®¾ç½®",rules:[g.REQUIRED],children:e.jsx(K,{options:We})})]}),e.jsx(P,{title:"åª’ä½“ä¿¡æ¯",size:"small",style:{marginBottom:24},children:e.jsx(_.Item,{name:"displayImages",label:"å±•ç¤ºå›¾ç‰‡",help:"æœ€å¤šå¯ä¸Šä¼ 6å¼ å±•ç¤ºå›¾ç‰‡",children:e.jsx(Ie,{maxCount:6})})}),e.jsx(P,{title:"é«˜çº§è®¾ç½®",size:"small",children:e.jsx(_.Item,{name:"systemPrompt",label:"System Prompt",help:"ç³»ç»Ÿæç¤ºè¯ï¼Œç”¨äºæŒ‡å¯¼AIçš„è¡Œä¸ºå’Œå›å¤é£æ ¼",rules:[{max:g.MAX_LENGTH.SYSTEM_PROMPT,message:`æœ€å¤š${g.MAX_LENGTH.SYSTEM_PROMPT}ä¸ªå­—ç¬¦`}],children:e.jsx(de,{rows:6,placeholder:"è¾“å…¥ç³»ç»Ÿæç¤ºè¯ï¼Œä¾‹å¦‚ï¼šYou are a helpful and friendly AI assistant...",showCount:!0,maxLength:g.MAX_LENGTH.SYSTEM_PROMPT})})})]}),e.jsx(D,{xs:24,lg:12,children:e.jsxs(P,{title:"å¤šè¯­è¨€ä¿¡æ¯",size:"small",extra:e.jsx(Ze,{activeLanguage:m,onChange:l}),children:[e.jsx(_.Item,{name:"nickname",label:"æ˜µç§°",rules:[g.REQUIRED,{max:g.MAX_LENGTH.NICKNAME,message:`æœ€å¤š${g.MAX_LENGTH.NICKNAME}ä¸ªå­—ç¬¦`}],children:e.jsx(k,{placeholder:"è¾“å…¥è§’è‰²æ˜µç§°",maxLength:g.MAX_LENGTH.NICKNAME})}),e.jsxs(B,{gutter:16,children:[e.jsx(D,{span:12,children:e.jsx(_.Item,{name:"region",label:"åœ°åŒº",rules:[g.REQUIRED,{max:g.MAX_LENGTH.REGION,message:`æœ€å¤š${g.MAX_LENGTH.REGION}ä¸ªå­—ç¬¦`}],children:e.jsx(k,{placeholder:"å¦‚ï¼šåŒ—äº¬",maxLength:g.MAX_LENGTH.REGION})})}),e.jsx(D,{span:12,children:e.jsx(_.Item,{name:"profession",label:"èŒä¸š",rules:[g.REQUIRED,{max:g.MAX_LENGTH.PROFESSION,message:`æœ€å¤š${g.MAX_LENGTH.PROFESSION}ä¸ªå­—ç¬¦`}],children:e.jsx(k,{placeholder:"å¦‚ï¼šAIåŠ©æ‰‹",maxLength:g.MAX_LENGTH.PROFESSION})})})]}),e.jsx(_.Item,{name:"introduction",label:"ä»‹ç»",rules:[g.REQUIRED,{max:g.MAX_LENGTH.INTRODUCTION,message:`æœ€å¤š${g.MAX_LENGTH.INTRODUCTION}ä¸ªå­—ç¬¦`}],children:e.jsx(de,{rows:4,placeholder:"è¾“å…¥è§’è‰²ä»‹ç»",showCount:!0,maxLength:g.MAX_LENGTH.INTRODUCTION})}),e.jsx(_.Item,{name:"tags",label:"æ ‡ç­¾",help:"è¾“å…¥æ ‡ç­¾åæŒ‰å›è½¦é”®æ·»åŠ ",children:e.jsx(K,{mode:"tags",placeholder:"æ·»åŠ æ ‡ç­¾",maxTagCount:5,maxTagTextLength:g.MAX_LENGTH.TAG})}),e.jsx(_.Item,{name:"greeting",label:"å¼€åœºç™½",rules:[g.REQUIRED,{max:g.MAX_LENGTH.GREETING,message:`æœ€å¤š${g.MAX_LENGTH.GREETING}ä¸ªå­—ç¬¦`}],children:e.jsx(de,{rows:3,placeholder:"è¾“å…¥è§’è‰²çš„å¼€åœºç™½",showCount:!0,maxLength:g.MAX_LENGTH.GREETING})})]})})]}),e.jsx(ke,{}),e.jsx("div",{style:{textAlign:"center"},children:e.jsxs(Y,{children:[e.jsx(S,{size:"large",onClick:()=>s("/characters"),children:"å–æ¶ˆ"}),e.jsx(S,{type:"primary",htmlType:"submit",loading:u,size:"large",icon:e.jsx(Me,{}),children:u?"ä¿å­˜ä¸­...":a?"æ›´æ–°è§’è‰²":"åˆ›å»ºè§’è‰²"})]})})]})})]})},{Search:mr}=k,{Title:hr}=U,xr=()=>{const r=H(),{templates:s,deleteTemplate:o,updateTemplate:a}=F(),[n,i]=x.useState(""),c=x.useMemo(()=>n.trim()?s.filter(l=>{const t=n.toLowerCase();return l.name.zh.toLowerCase().includes(t)||l.name.en.toLowerCase().includes(t)||l.name.ar.toLowerCase().includes(t)||l.description.zh.toLowerCase().includes(t)||l.description.en.toLowerCase().includes(t)||l.description.ar.toLowerCase().includes(t)||l.category.toLowerCase().includes(t)}):s,[s,n]),u=async l=>{try{o(l.id),I.success("åˆ é™¤æˆåŠŸ")}catch{I.error("åˆ é™¤å¤±è´¥")}},T=async(l,t)=>{try{a(l.id,{isActive:t}),I.success(t?"å·²å¯ç”¨":"å·²ç¦ç”¨")}catch{I.error("æ“ä½œå¤±è´¥")}},m=[{title:"æ¨¡æ¿åç§°",dataIndex:"name",key:"name",render:(l,t)=>e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:500,marginBottom:4},children:l.zh}),e.jsx("div",{style:{fontSize:12,color:"#666"},children:t.description.zh})]})},{title:"åˆ†ç±»",dataIndex:"category",key:"category",width:120,render:l=>{const t=Ke.find(p=>p.value===l);return e.jsx(J,{color:"blue",children:(t==null?void 0:t.label)||l})}},{title:"çŠ¶æ€",dataIndex:"isActive",key:"isActive",width:100,render:(l,t)=>e.jsx(Ne,{checked:l,onChange:p=>T(t,p),checkedChildren:"å¯ç”¨",unCheckedChildren:"ç¦ç”¨"})},{title:"åˆ›å»ºæ—¶é—´",dataIndex:"createdAt",key:"createdAt",width:140,sorter:(l,t)=>O(l.createdAt).unix()-O(t.createdAt).unix(),render:l=>e.jsx("div",{style:{fontSize:12},children:O(l).format("YYYY-MM-DD HH:mm")})},{title:"æœ€åæ›´æ–°",dataIndex:"updatedAt",key:"updatedAt",width:140,sorter:(l,t)=>O(l.updatedAt).unix()-O(t.updatedAt).unix(),render:l=>e.jsx("div",{style:{fontSize:12},children:O(l).format("YYYY-MM-DD HH:mm")})},{title:"æ“ä½œ",key:"actions",width:150,render:l=>e.jsxs(Y,{size:"small",children:[e.jsx(S,{type:"link",size:"small",icon:e.jsx(Pe,{}),onClick:()=>r(`/templates/edit/${l.id}`),children:"ç¼–è¾‘"}),e.jsx(Z,{title:"ç¡®è®¤åˆ é™¤",description:e.jsxs("div",{children:[e.jsxs("div",{children:["ç¡®å®šè¦åˆ é™¤æ¨¡æ¿ ",e.jsx("strong",{children:l.name.zh})," å—ï¼Ÿ"]}),e.jsx("div",{style:{color:"#ff4d4f",fontSize:12,marginTop:4},children:"æ­¤æ“ä½œä¸å¯æ¢å¤"})]}),onConfirm:()=>u(l),okText:"ç¡®è®¤åˆ é™¤",cancelText:"å–æ¶ˆ",okButtonProps:{danger:!0},children:e.jsx(S,{type:"link",size:"small",danger:!0,icon:e.jsx(ee,{}),children:"åˆ é™¤"})})]})}];return e.jsxs("div",{children:[e.jsxs("div",{style:{marginBottom:24},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:16},children:[e.jsx(hr,{level:3,style:{margin:0},children:"æ¨¡æ¿ç®¡ç†"}),e.jsx(S,{type:"primary",icon:e.jsx(G,{}),onClick:()=>r("/templates/new"),size:"large",children:"æ–°å¢æ¨¡æ¿"})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("div",{style:{display:"flex",gap:16,alignItems:"center"},children:e.jsx(mr,{placeholder:"æœç´¢æ¨¡æ¿åç§°ã€æè¿°æˆ–åˆ†ç±»",style:{width:300},onSearch:i,onChange:l=>i(l.target.value),allowClear:!0})}),e.jsxs("div",{style:{color:"#666",fontSize:14},children:["å…± ",c.length," ä¸ªæ¨¡æ¿ ï¼ˆå¯ç”¨ ",c.filter(l=>l.isActive).length," ä¸ªï¼‰"]})]})]}),e.jsx(P,{children:e.jsx(we,{columns:m,dataSource:c,rowKey:"id",pagination:{...Qe,total:c.length,showTotal:(l,t)=>`ç¬¬ ${t[0]}-${t[1]} æ¡ï¼Œå…± ${l} æ¡`}})})]})},{Title:gr}=U,{TextArea:_e}=k,Ee=()=>{const[r]=_.useForm(),s=H(),{id:o}=Ae(),a=!!o,{addTemplate:n,updateTemplate:i,getTemplate:c}=F(),[u,T]=x.useState(!1),[m,l]=x.useState("zh"),[t,p]=x.useState(null);x.useEffect(()=>{if(a&&o){const h=c(o);h?(p(h),r.setFieldsValue({...h,name:h.name[m],description:h.description[m],content:h.content[m]})):(I.error("æ¨¡æ¿ä¸å­˜åœ¨"),s("/templates"))}else r.setFieldsValue({category:z.TEMPLATE.CATEGORY,isActive:z.TEMPLATE.IS_ACTIVE})},[a,o,c,r,s,m]),x.useEffect(()=>{t&&r.setFieldsValue({name:t.name[m],description:t.description[m],content:t.content[m]})},[m,t,r]);const f=(h,v)=>({...v||{zh:"",en:"",ar:""},[m]:h||""}),A=async h=>{T(!0);try{const v={name:f(h.name,t==null?void 0:t.name),description:f(h.description,t==null?void 0:t.description),content:f(h.content,t==null?void 0:t.content)},w={category:h.category,isActive:h.isActive,...v};await new Promise(M=>setTimeout(M,1e3)),a&&t?(i(t.id,w),I.success("æ›´æ–°æˆåŠŸ")):(n(w),I.success("åˆ›å»ºæˆåŠŸ")),s("/templates")}catch(v){I.error(a?"æ›´æ–°å¤±è´¥":"åˆ›å»ºå¤±è´¥"),console.error("Submit error:",v)}finally{T(!1)}};return e.jsxs("div",{children:[e.jsx("div",{style:{marginBottom:24},children:e.jsxs(Y,{children:[e.jsx(S,{icon:e.jsx(Le,{}),onClick:()=>s("/templates"),children:"è¿”å›åˆ—è¡¨"}),e.jsx(gr,{level:3,style:{margin:0},children:a?"ç¼–è¾‘æ¨¡æ¿":"æ–°å¢æ¨¡æ¿"})]})}),e.jsx(P,{children:e.jsxs(_,{form:r,layout:"vertical",onFinish:A,scrollToFirstError:!0,children:[e.jsxs(B,{gutter:24,children:[e.jsx(D,{xs:24,lg:8,children:e.jsxs(P,{title:"åŸºæœ¬ä¿¡æ¯",size:"small",children:[e.jsx(_.Item,{name:"category",label:"åˆ†ç±»",rules:[g.REQUIRED],children:e.jsx(K,{options:Ke})}),e.jsx(_.Item,{name:"isActive",label:"çŠ¶æ€",valuePropName:"checked",children:e.jsx(Ne,{checkedChildren:"å¯ç”¨",unCheckedChildren:"ç¦ç”¨"})})]})}),e.jsx(D,{xs:24,lg:16,children:e.jsxs(P,{title:"å¤šè¯­è¨€ä¿¡æ¯",size:"small",extra:e.jsx(Ze,{activeLanguage:m,onChange:l}),children:[e.jsx(_.Item,{name:"name",label:"æ¨¡æ¿åç§°",rules:[g.REQUIRED,{max:g.MAX_LENGTH.TEMPLATE_NAME,message:`æœ€å¤š${g.MAX_LENGTH.TEMPLATE_NAME}ä¸ªå­—ç¬¦`}],children:e.jsx(k,{placeholder:"è¾“å…¥æ¨¡æ¿åç§°",maxLength:g.MAX_LENGTH.TEMPLATE_NAME})}),e.jsx(_.Item,{name:"description",label:"æ¨¡æ¿æè¿°",rules:[g.REQUIRED,{max:g.MAX_LENGTH.TEMPLATE_DESCRIPTION,message:`æœ€å¤š${g.MAX_LENGTH.TEMPLATE_DESCRIPTION}ä¸ªå­—ç¬¦`}],children:e.jsx(_e,{rows:3,placeholder:"è¾“å…¥æ¨¡æ¿æè¿°",showCount:!0,maxLength:g.MAX_LENGTH.TEMPLATE_DESCRIPTION})}),e.jsx(_.Item,{name:"content",label:"æ¨¡æ¿å†…å®¹",rules:[g.REQUIRED,{max:g.MAX_LENGTH.TEMPLATE_CONTENT,message:`æœ€å¤š${g.MAX_LENGTH.TEMPLATE_CONTENT}ä¸ªå­—ç¬¦`}],children:e.jsx(_e,{rows:12,placeholder:"è¾“å…¥æ¨¡æ¿å†…å®¹...",showCount:!0,maxLength:g.MAX_LENGTH.TEMPLATE_CONTENT})})]})})]}),e.jsx(ke,{}),e.jsx("div",{style:{textAlign:"center"},children:e.jsxs(Y,{children:[e.jsx(S,{size:"large",onClick:()=>s("/templates"),children:"å–æ¶ˆ"}),e.jsx(S,{type:"primary",htmlType:"submit",loading:u,size:"large",icon:e.jsx(Me,{}),children:u?"ä¿å­˜ä¸­...":a?"æ›´æ–°æ¨¡æ¿":"åˆ›å»ºæ¨¡æ¿"})]})})]})})]})},{Title:fr,Text:ue}=U,yr=()=>{const{config:r,updateConfig:s}=F(),[o,a]=x.useState(!1),[n,i]=x.useState(""),[c,u]=x.useState(""),T=p=>new Promise(f=>{setTimeout(()=>{const A=URL.createObjectURL(p);f(A)},1e3)}),m=async p=>{const{file:f,onSuccess:A,onError:h}=p;try{if(!q.ACCEPTED_IMAGE_TYPES.includes(f.type)){I.error("åªèƒ½ä¸Šä¼  JPG/PNG/GIF/WebP æ ¼å¼çš„å›¾ç‰‡ï¼"),h(new Error("Invalid file type"));return}if(!(f.size<=q.MAX_FILE_SIZE)){I.error("å›¾ç‰‡å¤§å°ä¸èƒ½è¶…è¿‡ 5MBï¼"),h(new Error("File too large"));return}const M=await T(f),X=[...r.defaultAvatars,M];s({defaultAvatars:X}),I.success("å¤´åƒä¸Šä¼ æˆåŠŸ"),A({url:M},f)}catch(v){console.error("Upload failed:",v),I.error("ä¸Šä¼ å¤±è´¥"),h(v)}},l=p=>{const f=r.defaultAvatars.filter(A=>A!==p);s({defaultAvatars:f}),I.success("åˆ é™¤æˆåŠŸ")},t=p=>{i(p),u("é»˜è®¤å¤´åƒé¢„è§ˆ"),a(!0)};return e.jsxs("div",{children:[e.jsxs("div",{style:{marginBottom:24},children:[e.jsx(fr,{level:3,style:{margin:0},children:"é€šç”¨é…ç½®"}),e.jsx(ue,{type:"secondary",children:"ç®¡ç†ç³»ç»Ÿçš„é€šç”¨é…ç½®ä¿¡æ¯"})]}),e.jsxs(P,{title:"é»˜è®¤å¤´åƒç®¡ç†",style:{marginBottom:24},children:[e.jsxs("div",{style:{marginBottom:16},children:[e.jsx(Re,{customRequest:m,showUploadList:!1,accept:q.ACCEPTED_IMAGE_TYPES.join(","),children:e.jsx(S,{type:"primary",icon:e.jsx(G,{}),children:"ä¸Šä¼ æ–°å¤´åƒ"})}),e.jsx(ue,{type:"secondary",style:{marginLeft:12},children:"æ”¯æŒ JPGã€PNGã€GIFã€WebP æ ¼å¼ï¼Œå¤§å°ä¸è¶…è¿‡ 5MB"})]}),e.jsx("div",{style:{border:"1px solid #f0f0f0",borderRadius:8,padding:16,minHeight:200,backgroundColor:"#fafafa"},children:r.defaultAvatars.length===0?e.jsxs("div",{style:{textAlign:"center",padding:"60px 0",color:"#999"},children:[e.jsx(G,{style:{fontSize:48,marginBottom:16}}),e.jsx("div",{children:"æš‚æ— é»˜è®¤å¤´åƒ"}),e.jsx("div",{style:{fontSize:12,marginTop:8},children:"ç‚¹å‡»ä¸Šæ–¹æŒ‰é’®ä¸Šä¼ å¤´åƒ"})]}):e.jsx(B,{gutter:[16,16],children:r.defaultAvatars.map((p,f)=>e.jsx(D,{xs:12,sm:8,md:6,lg:4,children:e.jsx(P,{hoverable:!0,size:"small",cover:e.jsx("div",{style:{height:120,background:`url(${p}) center/cover`,borderRadius:"8px 8px 0 0"}}),actions:[e.jsx(S,{type:"text",icon:e.jsx(Ce,{}),onClick:()=>t(p)},"preview"),e.jsx(Z,{title:"ç¡®è®¤åˆ é™¤",description:"ç¡®å®šè¦åˆ é™¤è¿™ä¸ªé»˜è®¤å¤´åƒå—ï¼Ÿ",onConfirm:()=>l(p),okText:"ç¡®è®¤",cancelText:"å–æ¶ˆ",children:e.jsx(S,{type:"text",danger:!0,icon:e.jsx(ee,{})})},"delete")],children:e.jsx(P.Meta,{title:`å¤´åƒ ${f+1}`,description:e.jsx(ue,{type:"secondary",style:{fontSize:12},children:"é»˜è®¤å¤´åƒ"})})})},f))})}),e.jsxs("div",{style:{marginTop:16,padding:12,backgroundColor:"#f6f8fa",borderRadius:6,fontSize:12,color:"#666"},children:[e.jsx("div",{style:{marginBottom:4},children:e.jsx("strong",{children:"è¯´æ˜ï¼š"})}),e.jsx("div",{children:"â€¢ é»˜è®¤å¤´åƒå°†åœ¨åˆ›å»ºAIè§’è‰²æ—¶ä½œä¸ºå¤´åƒé€‰é¡¹æä¾›"}),e.jsx("div",{children:"â€¢ å»ºè®®ä¸Šä¼ å°ºå¯¸ä¸º 150x150 åƒç´ çš„æ­£æ–¹å½¢å›¾ç‰‡"}),e.jsxs("div",{children:["â€¢ å½“å‰é»˜è®¤å¤´åƒæ•°é‡ï¼š",r.defaultAvatars.length]})]})]}),e.jsx(xe,{open:o,title:c,footer:null,onCancel:()=>a(!1),children:e.jsx("img",{alt:"preview",style:{width:"100%"},src:n})})]})};I.config({top:100,duration:3,maxCount:3});const $=({children:r})=>{const{isAuthenticated:s}=ce();return s?e.jsx(rr,{children:r}):e.jsx(Q,{to:"/login",replace:!0})},jr=({children:r})=>{const{isAuthenticated:s}=ce();return s?e.jsx(Q,{to:"/characters",replace:!0}):e.jsx(e.Fragment,{children:r})};function vr(){return e.jsx(qt,{children:e.jsx(ir,{children:e.jsxs(nt,{children:[e.jsx(N,{path:"/login",element:e.jsx(jr,{children:e.jsx(Kt,{})})}),e.jsx(N,{path:"/",element:e.jsx(Q,{to:"/characters",replace:!0})}),e.jsx(N,{path:"/characters",element:e.jsx($,{children:e.jsx(ur,{})})}),e.jsx(N,{path:"/characters/new",element:e.jsx($,{children:e.jsx(be,{})})}),e.jsx(N,{path:"/characters/edit/:id",element:e.jsx($,{children:e.jsx(be,{})})}),e.jsx(N,{path:"/templates",element:e.jsx($,{children:e.jsx(xr,{})})}),e.jsx(N,{path:"/templates/new",element:e.jsx($,{children:e.jsx(Ee,{})})}),e.jsx(N,{path:"/templates/edit/:id",element:e.jsx($,{children:e.jsx(Ee,{})})}),e.jsx(N,{path:"/config",element:e.jsx($,{children:e.jsx(yr,{})})}),e.jsx(N,{path:"*",element:e.jsx(Q,{to:"/characters",replace:!0})})]})})})}he.createRoot(document.getElementById("root")).render(e.jsx(at.StrictMode,{children:e.jsx(ot,{children:e.jsx(jt,{locale:Xt,children:e.jsx(vr,{})})})}));
